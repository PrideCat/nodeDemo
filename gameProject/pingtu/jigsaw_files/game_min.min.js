(function () {
    FZ = {
        newClass: function (a, b) {
            void 0 === a && (a = {});
            var c = function () { };
            "function" === typeof b && b.hasOwnProperty("prototype") ? c.prototype = b.prototype : "object" === typeof b && (c.prototype = b);
            var e = function () { };
            if (a.hasOwnProperty("init") || "init" in c.prototype)
                e = function () {
                    this.init.apply(this, arguments)
                }
                    ;
            e.prototype = new c;
            e.prototype.constructor = e;
            for (var d in a)
                e.prototype[d] = a[d];
            e.prototype.Super = c.prototype;
            return e
        },
        $: function (a) {
            return document.getElementById(a)
        },
        Tools: {
            splat: function (a) {
                return a ? a instanceof Array || "object" === typeof a && "number" === typeof a.length && a.callee ? a : [a] : []
            },
            bind: function (a, b, c) {
                return function () {
                    return b.apply(a, FZ.Tools.splat(c))
                }
            },
            bindWithEvent: function (a, b, c) {
                return function (e) {
                    e = [e];
                    Array.prototype.push.apply(e, FZ.Tools.splat(c));
                    return b.apply(a, e)
                }
            },
            trim: function (a) {
                return a.replace(/^\s+|\s+$/g, "")
            },
            extend: function (a, b) {
                for (var c in b)
                    a[c] = b[c]
            },
            OnetimeEventListener: function (a, b, c, e, d) {
                FZ._trace(d);
                var f = 0;
                e || (e = !1);
                var g = function (d) {
                    window.clearTimeout(f);
                    a.removeEventListener(b, g, e);
                    c(d)
                };
                a.addEventListener(b, g, e);
                d || (d = -1);
                - 1 != d && (f = window.setTimeout(g, 0))
            }
        },
        EngineOptions: {
            DebugLevel: "error",
            IsCanvasVersion: !0
        },
        _trace: function (a) {
            "info" === FZ.EngineOptions.DebugLevel && console.log(a)
        },
        _error: function (a) {
            "none" !== FZ.EngineOptions.DebugLevel && console.error(a)
        },
        _assert: function (a, b) {
            "error" !== FZ.EngineOptions.DebugLevel && "info" !== FZ.EngineOptions.DebugLevel || a || alert(b)
        },
        Browser: -1 != navigator.userAgent.indexOf("iPhone") ? "iPhone" : -1 != navigator.userAgent.indexOf("iPod") ? "iPod" : -1 != navigator.userAgent.indexOf("iPad") ? "iPad" : -1 != navigator.userAgent.indexOf("Android") ? "Android" : "Other"
    }
}
)();
(function () {
    FZ.ResourceManager = {
        __ResourceCount: 0,
        __ResourceLoaded: 0,
        __GeneralCallback: null,
        __GeneralCallbackObj: null,
        ResourceLib: {},
        isResourceLoaded: function () {
            return this.__ResourceCount === this.__ResourceLoaded
        },
        addResource: function (a) {
            if (this.ResourceFactory.hasOwnProperty(a.Type)) {
                this.__ResourceCount++;
                var b = {
                    Resource: null,
                    Loaded: !1
                };
                this.ResourceLib[a.Name] = b;
                FZ._trace("Add/load resource[" + a.Name + "] : " + a.URL);
                var c = new this.ResourceFactory[a.Type](a.URL, b);
                c.setCallback(function () {
                    b.Loaded = !0;
                    FZ.ResourceManager.__ResourceLoaded++;
                    a.callback && a.callback(b.Resource);
                    FZ.ResourceManager.__GeneralCallback && FZ.ResourceManager.__GeneralCallback.call()
                });
                c.load()
            } else
                Throw("Error: Do not suppport Resourcetype:" + a.Type)
        },
        setCallback: function (a) {
            this.__GeneralCallback = a
        },
        clearCallback: function () {
            this.setCallback(null)
        },
        getLoadingRatio: function () {
            return 0 === this.__ResourceCount ? 1 : this.__ResourceLoaded / this.__ResourceCount
        },
        ResourceFactory: {},
        registerResourceType: function (a, b) {
            this.ResourceFactory[a] = b
        },
        getResource: function (a) {
            return this.ResourceLib[a].Resource
        }
    };
    FZ.Class_Resource = {
        callback: function () { },
        init: function (a, b) {
            this.URL = a;
            this.target = b
        },
        setCallback: function (a) {
            this.callback = a
        }
    }
}
)();
(function () {
    var a = FZ.newClass({
        load: function () {
            this.target.Resource = document.createElement("script");
            this.target.Resource.addEventListener("load", this.callback, !1);
            this.target.Resource.src = this.URL;
            document.body.appendChild(this.target.Resource)
        }
    }, FZ.Class_Resource);
    FZ.ResourceManager.registerResourceType("Js", a)
}
)();
(function () {
    var a = FZ.newClass({
        load: function () {
            this.target.Resource = new Image;
            FZ.Tools.OnetimeEventListener(this.target.Resource, "load", this.callback, !1);
            this.target.Resource.src = this.URL
        }
    }, FZ.Class_Resource);
    FZ.ResourceManager.registerResourceType("Image", a)
}
)();
(function () {
    FZ.CanvasSprite = FZ.newClass({
        __currentIdx: 0,
        __currentFrameTime: 0,
        __matrixDirty: !0,
        __inverseMatrixDirty: !0,
        __drawRect: null,
        __dirtyUpdateRequired: !0,
        __opacity: 1,
        __dirtyRect: null,
        __dirtyManager: null,
        init: function (a, b, c, e) {
            this.__width = b;
            this.__height = c;
            this.__theImages = [];
            this.__children = [];
            this.__localMatrix = new FZ.Math.Matrix3;
            this.__worldMatrix = new FZ.Math.Matrix3;
            this.__inverseMatrix = new FZ.Math.Matrix3;
            this.__parentSprite = null;
            this.__playing = Boolean(e);
            if (a && 0 !== a.length)
                for (b = 0,
                    c = a.length; b < c; ++b)
                    a[b] instanceof Array ? this.__theImages.push([a[b][0], a[b][1] ? a[b][1] : 0.033]) : this.__theImages.push([a[b], 0.033]);
            else
                this.__currentIdx = -1
        },
        clone: function () {
            var a = new FZ.Sprite;
            a.__width = this.__width;
            a.__height = this.__height;
            a.__theImages = this.__theImages;
            a.__localMatrix = this.__localMatrix.clone();
            a.__currentIdx = 0 === this.__theImages.length ? -1 : 0;
            for (var b = 0, c = this.__children.length; b < c; ++b)
                a.addChild(this.__children[b].clone());
            return a
        },
        setFrameTime: function (a) {
            if ("number" === typeof a)
                for (var b = 0, c = this.__theImages.length; b < c; ++b)
                    this.__theImages[b][1] = a;
            else
                for (b = 0; b < a.length && b < __theImages.length; ++b)
                    this.__theImages[b][1] = a[b]
        },
        addChild: function (a) {
            a.__parentSprite && a.__parentSprite.removeChild(a);
            this.__children.push(a);
            a.__parentSprite = this;
            a.__dirtyRect = this.__dirtyRect;
            a.__dirtyManager = this.__dirtyManager;
            this.__markMatrixDirty();
            this.forceUpdate()
        },
        removeChild: function (a) {
            for (var b = this.__children.length - 1; 0 <= b; --b)
                if (this.__children[b] === a) {
                    a.__parentSprite = null;
                    a.__dirtyRect = null;
                    a.__dirtyManager = null;
                    this.__children.splice(b, 1);
                    this.__markMatrixDirty();
                    this.forceUpdate();
                    break
                }
        },
        update: function (a) {
            if (this.__playing) {
                for (var b = 0, c = this.__children.length; b < c; ++b)
                    this.__children[b].update(a);
                if (-1 !== this.__currentIdx)
                    for (this.__currentFrameTime += a; this.__currentFrameTime > this.__theImages[this.__currentIdx][1];)
                        this.__currentFrameTime -= this.__theImages[this.__currentIdx][1],
                            this.__currentIdx++ ,
                            this.__currentIdx === this.__theImages.length && (this.__currentIdx = 0)
            }
        },
        forceUpdate: function () {
            this.__dirtyUpdateRequired = !0;
            for (var a = 0, b = this.__children.length; a < b; ++a)
                this.__children[a].forceUpdate()
        },
        setFrame: function (a) {
            this.forceUpdate();
            this.__currentIdx = FZ.Math.clamp(a, 0, this.__theImages.length - 1)
        },
        stop: function () {
            this.__playing = !1
        },
        play: function () {
            this.__playing = !0
        },
        getPosition: function () {
            this.__DirtyMatrixProcess();
            var a = new FZ.Math.Vector2(0, 0);
            a.applyTransform(this.__worldMatrix, a);
            return a.scale(1 / FZ.GameBase.PixelScale, a)
        },
        getSize: function () {
            return -1 === this.__currentIdx ? !1 : [this.__width, this.__height]
        },
        localToWorld: function (a) {
            this.__DirtyMatrixProcess();
            return a.applyTransform(this.__worldMatrix)
        },
        worldToLocal: function (a) {
            this.__DirtyInverseMatrixProcess();
            return a.applyTransform(this.__inverseMatrix)
        },
        __markMatrixDirty: function () {
            if (!this.__matrixDirty) {
                this.__inverseMatrixDirty = this.__matrixDirty = !0;
                this.__drawRect = null;
                for (var a = 0, b = this.__children.length; a < b; ++a)
                    this.__children[a].__markMatrixDirty()
            }
        },
        __DirtyInverseMatrixProcess: function () {
            this.__DirtyMatrixProcess();
            this.__inverseMatrixDirty && (this.__worldMatrix.inverseAffine(this.__inverseMatrix),
                this.__inverseMatrixDirty = !1)
        },
        __DirtyMatrixProcess: function () {
            var a = !1;
            if (this.__matrixDirty) {
                var b = this.__worldMatrix.clone();
                this.__parentSprite ? this.__parentSprite.__worldMatrix.mul(this.__localMatrix, this.__worldMatrix) : this.__worldMatrix.copyFrom(this.__localMatrix);
                this.__matrixDirty = !1;
                this.__dirtyRect && !b.equaTo(this.__worldMatrix) && (this.__dirtyRect.merge(this.getRect(b)),
                    this.__dirtyRect.merge(this.getRect()),
                    a = !0,
                    this.__dirtyUpdateRequired = !1)
            }
            !a && this.__dirtyRect && this.__dirtyUpdateRequired && (this.__dirtyRect.merge(this.getRect()),
                this.__dirtyUpdateRequired = !1);
            a = 0;
            for (b = this.__children.length; a < b; ++a)
                this.__children[a].__DirtyMatrixProcess()
        },
        setDirtyMonitor: function (a, b) {
            this.__dirtyRect = a;
            this.__dirtyManager = b;
            for (var c = 0, e = this.__children.length; c < e; ++c)
                this.__children[c].setDirtyMonitor(a, b)
        },
        getDirtyRect: function () {
            return this.__dirtyRect
        },
        draw: function (a) {
            this.__DirtyMatrixProcess();
            -1 === this.__currentIdx || this.__dirtyRect && !this.__dirtyManager.isOverlap(this.getRect()) || (a.setTransform(this.__worldMatrix.m11, this.__worldMatrix.m12, this.__worldMatrix.m21, this.__worldMatrix.m22, this.__worldMatrix.dx, this.__worldMatrix.dy),
                a.globalAlpha = this.__opacity,
                a.drawImage(this.__theImages[this.__currentIdx][0], 0, 0));
            for (var b = 0, c = this.__children.length; b < c; ++b)
                this.__children[b].draw(a)
        },
        drawClip: function (a, b, c, e, d) {
            this.__DirtyMatrixProcess();
            for (var f = 0, g = this.__children.length; f < g; ++f)
                this.__children[f].draw(a);
            -1 === this.__currentIdx || this.__dirtyRect && !this.__dirtyManager.isOverlap(this.getRect()) || (a.setTransform(this.__worldMatrix.m11, this.__worldMatrix.m12, this.__worldMatrix.m21, this.__worldMatrix.m22, this.__worldMatrix.dx, this.__worldMatrix.dy),
                a.globalAlpha = this.__opacity,
                a.drawImage(this.__theImages[this.__currentIdx][0], b, c, e * FZ.GameBase.PixelScale, d * FZ.GameBase.PixelScale, 0, 0, e * FZ.GameBase.PixelScale, d * FZ.GameBase.PixelScale))
        },
        getRect: function (a) {
            if (null !== this.__drawRect && !a)
                return this.__drawRect;
            var b = [this.__theImages[0][0].width, this.__theImages[0][0].height]
                , b = [new FZ.Math.Vector2(0, 0), new FZ.Math.Vector2(b[0], 0), new FZ.Math.Vector2(0, b[1]), new FZ.Math.Vector2(b[0], b[1])];
            if (a) {
                for (var c = 0; 4 > c; ++c)
                    b[c].applyTransform(a, b[c]);
                return (new FZ.Rect(b)).scale(1 / FZ.GameBase.PixelScale)
            }
            for (c = 0; 4 > c; ++c)
                b[c].applyTransform(this.__worldMatrix, b[c]);
            return this.__drawRect = (new FZ.Rect(b)).scale(1 / FZ.GameBase.PixelScale)
        },
        setOpacity: function (a) {
            this.forceUpdate();
            this.__opacity = a
        },
        getOpacity: function () {
            return this.__opacity
        },
        translate: function (a, b) {
            this.__localMatrix.translate(a * FZ.GameBase.PixelScale, b * FZ.GameBase.PixelScale);
            this.__markMatrixDirty()
        },
        rotate: function (a) {
            this.__localMatrix.rotate(a);
            this.__markMatrixDirty()
        },
        scale1: function (a) {
            this.__localMatrix.scale1(a);
            this.__markMatrixDirty()
        },
        scale2: function (a, b) {
            this.__localMatrix.scale2(a, b);
            this.__markMatrixDirty()
        },
        makeTranslate: function (a, b) {
            this.__localMatrix.makeTranslate(a * FZ.GameBase.PixelScale, b * FZ.GameBase.PixelScale);
            this.__markMatrixDirty()
        },
        makeRotate: function (a) {
            this.__localMatrix.makeRotate(a);
            this.__markMatrixDirty()
        },
        makeScale1: function (a) {
            this.__localMatrix.makeScale1(a);
            this.__markMatrixDirty()
        },
        makeScale2: function (a, b) {
            this.__localMatrix.makeScale2(a, b);
            this.__markMatrixDirty()
        },
        resetMatrix: function () {
            this.__localMatrix.identity();
            this.__markMatrixDirty()
        }
    });
    FZ.CanvasSpriteManager = {
        __sprites: {},
        addResource: function (a, b, c, e, d, f, g) {
            FZ.ResourceManager.addResource({
                Name: a,
                Type: "Image",
                URL: c,
                callback: function (b) {
                    if (1 === f && void 0 === g)
                        if (1 === FZ.GameBase.PixelScale)
                            FZ.spriteManager.__sprites[a] = new FZ.Sprite([b], b.width, b.height);
                        else {
                            var c = document.createElement("canvas");
                            c.width = Math.ceil(b.width * FZ.GameBase.PixelScale);
                            c.height = Math.ceil(b.height * FZ.GameBase.PixelScale);
                            c.getContext("2d").drawImage(b, 0, 0, c.width, c.height);
                            FZ.spriteManager.__sprites[a] = new FZ.Sprite([c], b.width, b.height);
                            b.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="
                        }
                    else {
                        if (1 < g) {
                            for (var k = [], t = 0; t < g; ++t)
                                for (var q = 0; q < f; ++q)
                                    c = document.createElement("canvas"),
                                        c.width = Math.ceil(b.width / f * FZ.GameBase.PixelScale),
                                        c.height = Math.ceil(b.height / g * FZ.GameBase.PixelScale),
                                        c.getContext("2d").drawImage(b, b.width / f * q, b.height / g * t, b.width / f, b.height / g, 0, 0, c.width, c.height),
                                        k.push([c]);
                            FZ.spriteManager.__sprites[a] = new FZ.Sprite(k, b.width / f, b.height / g);
                            c = document.createElement("canvas");
                            c.width = Math.ceil(b.width * FZ.GameBase.PixelScale);
                            c.height = Math.ceil(b.height * FZ.GameBase.PixelScale);
                            c.getContext("2d").drawImage(b, 0, 0, c.width, c.height);
                            k = "hint" + a.substr(3);
                            FZ.spriteManager.__sprites[k] = new FZ.Sprite([c], b.width, b.height)
                        } else {
                            k = [];
                            for (q = 0; q < f; ++q)
                                c = document.createElement("canvas"),
                                    c.width = Math.ceil(b.width / f * FZ.GameBase.PixelScale),
                                    c.height = Math.ceil(b.height * FZ.GameBase.PixelScale),
                                    c.getContext("2d").drawImage(b, b.width / f * q, 0, b.width / f, b.height, 0, 0, c.width, c.height),
                                    k.push([c]);
                            FZ.spriteManager.__sprites[a] = new FZ.Sprite(k, b.width / f, b.height)
                        }
                        b.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="
                    }
                    FZ.spriteManager.__sprites[a].makeTranslate(e, d)
                }
            })
        },
        getSprite: function (a) {
            return this.__sprites[a]
        },
        getSpritesArrayByTag: function (a) {
            var b = [];
            for (i in FZ.ImageTags[a])
                b.push(this.getSprite(FZ.ImageTags[a][i].name));
            return b
        },
        getSpritesObjectByTag: function (a) {
            var b = {};
            for (i in FZ.ImageTags[a]) {
                var c = FZ.ImageTags[a][i].name;
                b[c] = FZ.spriteManager.getSprite(c)
            }
            return b
        }
    };
    FZ.EngineOptions.IsCanvasVersion && (FZ.Sprite = FZ.CanvasSprite,
        FZ.spriteManager = FZ.CanvasSpriteManager)
}
)();
(function () {
    FZ.CSSSprite = FZ.newClass({
        __theImage: null,
        __childred: null,
        __Div: null,
        __parentSprite: null,
        __mousedown: null,
        __mousemove: null,
        __mouseup: null,
        __width: 0,
        __height: 0,
        __x: 0,
        __y: 0,
        __scaleX: 1,
        __scaleY: 1,
        __angle: 0,
        init: function (a, b) {
            this.__theImage = a;
            this.__children = [];
            this.MousePos = {
                x: 0,
                y: 0
            };
            this.__Div = document.createElement("div");
            this.__Div.style.position = "absolute";
            this.__Div.style.left = "0px";
            this.__Div.style.top = "0px";
            this.__theImage ? (this.setSize(a.width, a.height),
                this.__Div.style.backgroundImage = "url(" + this.__theImage.src + ")") : this.setSize(0, 0);
            this.setOpacity(1);
            this.AnimationQueue = []
        },
        appendAnimation: function (a, b) {
            this.AnimationQueue.push([a, b]);
            if (1 === this.AnimationQueue.length) {
                var c = this;
                window.setTimeout(function () {
                    c.__playNextAnimation()
                }, 0)
            }
        },
        __playNextAnimation: function () {
            if (0 === this.AnimationQueue.length)
                this.__Div.style.webkitTransitionDuration = "0ms";
            else {
                var a = this.AnimationQueue[0];
                a[0]();
                var b = this;
                FZ.Tools.OnetimeEventListener(this.__Div, "webkitTransitionEnd", function (a) {
                    return function () {
                        if (a[1])
                            a[1]();
                        b.AnimationQueue.splice(0, 1);
                        b.__playNextAnimation()
                    }
                }(a), !1, a[0].duration + 60)
            }
        },
        anim_MoveTo: function (a, b, c) {
            c = Math.ceil(c);
            var e = this
                , d = function () {
                    e.__Div.style.webkitTransitionDuration = c + "ms";
                    e.setPosition(a, b)
                };
            d.duration = c;
            return d
        },
        anim_RotateTo: function (a, b) {
            b = Math.ceil(b);
            var c = this
                , e = function () {
                    c.__Div.style.webkitTransitionDuration = b + "ms";
                    c.setRotate(a)
                };
            e.duration = b;
            return e
        },
        anim_ScaleTo: function (a, b, c) {
            c = Math.ceil(c);
            var e = this
                , d = function () {
                    e.__Div.style.webkitTransitionDuration = c + "ms";
                    e.setScale2(a, b)
                };
            d.duration = c;
            return d
        },
        anim_OpacityTo: function (a, b) {
            b = Math.ceil(b);
            var c = this
                , e = function () {
                    c.__Div.style.webkitTransitionDuration = b + "ms";
                    c.__Div.style.opacity = a
                };
            e.duration = b;
            return e
        },
        __getTransform: function () {
            return "scale(" + this.__scaleX + "," + this.__scaleY + ") rotate(" + Math.round(this.__angle) + "deg)"
        },
        __setTransform: function (a) {
            this.__Div.style.left = Math.round(this.__x * FZ.GameBase.PixelScale) + "px";
            this.__Div.style.top = Math.round(this.__y * FZ.GameBase.PixelScale) + "px";
            this.__Div.style.webkitTransform = a
        },
        Transform: function () {
            return this.__Div.style.webkitTransform
        },
        setPosition: function (a, b) {
            this.__x = a;
            this.__y = b;
            this.__setTransform(this.__getTransform())
        },
        getPosition: function () {
            return [this.__x, this.__y]
        },
        setScale: function (a) {
            this.setScale2(a, a)
        },
        setScale2: function (a, b) {
            this.__scaleX = a;
            this.__scaleY = b;
            this.__setTransform(this.__getTransform())
        },
        getScale2: function () {
            return [this.__scaleX, this.__scaleY]
        },
        setRotate: function (a) {
            this.__angle = a;
            this.__setTransform(this.__getTransform())
        },
        getRotate: function () {
            return this.__angle
        },
        setSize: function (a, b) {
            this.__width = a;
            this.__height = b;
            this.__Div.style.width = a * FZ.GameBase.PixelScale + "px";
            this.__Div.style.height = b * FZ.GameBase.PixelScale + "px"
        },
        getSize: function () {
            return [this.__width, this.__height]
        },
        setZ: function (a) {
            this.__Div.style.zIndex = a
        },
        getZ: function (a) {
            return this.__Div.style.zIndex
        },
        setOpacity: function (a) {
            this.__opacity = a;
            this.__Div.style.opacity = a
        },
        getOpacity: function () {
            return this.__opacity
        },
        setText: function (a) {
            this.__Div.innerHTML = a
        },
        clone: function () {
            var a = new FZ.Sprite(this.__theImage);
            a.setPosition.apply(a, this.getPosition());
            a.setSize.apply(a, this.getSize());
            for (var b = 0, c = this.__children.length; b < c; ++b)
                a.addChild(this.__children[b].clone());
            return a
        },
        addChild: function (a) {
            this.__children.push(a);
            a.__parentSprite = this;
            this.__Div.appendChild(a.__Div)
        },
        removeChild: function (a) {
            if (a) {
                for (var b = 0; b < this.__children; ++b)
                    if (this.__children[b] === a) {
                        this.__children.splice(b, 1);
                        break
                    }
                a.__parentSprite = null;
                this.__Div.removeChild(a.__Div)
            }
        },
        EnableEvent: function () {
            this.__mousedown || (this.__mousedown = FZ.Tools.bindWithEvent(this, function (a) {
                if (FZ.StateTransition.inTransition())
                    return !1;
                this.__GetMousePos(a);
                this.MouseDown()
            }),
                this.__mousemove = FZ.Tools.bindWithEvent(this, function (a) {
                    if (FZ.StateTransition.inTransition())
                        return !1;
                    this.__GetMousePos(a);
                    this.MouseMove()
                }),
                this.__mouseout = FZ.Tools.bindWithEvent(this, function (a) {
                    if (FZ.StateTransition.inTransition())
                        return !1;
                    this.MousePos = {
                        x: -1,
                        y: -1
                    };
                    this.MouseMove()
                }),
                this.__mouseup = FZ.Tools.bindWithEvent(this, function (a) {
                    if (FZ.StateTransition.inTransition())
                        return !1;
                    this.MouseUp()
                }),
                this.__Div.addEventListener("mousedown", this.__mousedown, !1),
                this.__Div.addEventListener("mouseup", this.__mouseup, !1),
                this.__Div.addEventListener("mousemove", this.__mousemove, !1),
                this.__Div.addEventListener("mouseout", this.__mouseout, !1),
                this.__touchstart = FZ.Tools.bindWithEvent(this, function (a) {
                    a.stopPropagation();
                    a.preventDefault();
                    if (FZ.StateTransition.inTransition())
                        return !1;
                    this.__GetTouchPos(a);
                    this.MouseDown()
                }),
                this.__touchmove = FZ.Tools.bindWithEvent(this, function (a) {
                    if (FZ.StateTransition.inTransition())
                        return !1;
                    this.__GetTouchPos(a);
                    this.MouseMove()
                }),
                this.__touchend = FZ.Tools.bindWithEvent(this, function (a) {
                    if (FZ.StateTransition.inTransition())
                        return !1;
                    this.MouseUp()
                }),
                this.__Div.addEventListener("touchstart", this.__touchstart, !1),
                this.__Div.addEventListener("touchmove", this.__touchmove, !1),
                this.__Div.addEventListener("touchend", this.__touchend, !1))
        },
        DisableEvent: function () {
            this.__Div.removeEventListener("mousedown", this.__mousedown, !1);
            this.__Div.removeEventListener("mouseup", this.__mouseup, !1);
            this.__Div.removeEventListener("mousemove", this.__mousemove, !1);
            this.__Div.removeEventListener("mouseout", this.__mouseout, !1);
            this.__mouseout = this.__mousemove = this.__mouseup = this.__mousedown = null;
            this.__Div.removeEventListener("touchstart", this.__touchstart, !1);
            this.__Div.removeEventListener("touchmove", this.__touchmove, !1);
            this.__Div.removeEventListener("touchend", this.__touchend, !1);
            this.__touchend = this.__touchmove = this.__touchstart = null
        },
        MouseDown: function () { },
        MouseMove: function () { },
        MouseUp: function () { },
        __GetMousePos: function (a) {
            function b(a) {
                function c(a) {
                    if (a) {
                        var b = c(a.parentElement);
                        return {
                            offsetLeft: a.offsetLeft + b.offsetLeft,
                            offsetTop: a.offsetTop + b.offsetTop
                        }
                    }
                    return {
                        offsetLeft: 0,
                        offsetTop: 0
                    }
                }
                var f = a.__parentSprite ? b(a.__parentSprite) : c(a.__Div);
                return {
                    offsetLeft: a.__x + f.offsetLeft,
                    offsetTop: a.__y + f.offsetTop
                }
            }
            var c = b(this);
            this.MousePos.x = a.pageX - c.offsetLeft;
            this.MousePos.y = a.pageY - c.offsetTop
        },
        __GetTouchPos: function (a) {
            function b(a) {
                function c(a) {
                    if (a) {
                        var b = c(a.parentElement);
                        return {
                            offsetLeft: a.offsetLeft + b.offsetLeft,
                            offsetTop: a.offsetTop + b.offsetTop
                        }
                    }
                    return {
                        offsetLeft: 0,
                        offsetTop: 0
                    }
                }
                var f = a.__parentSprite ? b(a.__parentSprite) : c(a.__Div);
                return {
                    offsetLeft: a.__x + f.offsetLeft,
                    offsetTop: a.__y + f.offsetTop
                }
            }
            var c = b(this);
            this.MousePos.x = a.touches[0].pageX - c.offsetLeft;
            this.MousePos.y = a.touches[0].pageY - c.offsetTop
        }
    });
    FZ.CSSSpriteManager = {
        __sprites: {},
        addResource: function (a, b, c, e, d, f) {
            FZ.ResourceManager.addResource({
                Name: a,
                Type: "Image",
                URL: c,
                callback: function (c) {
                    FZ.spriteManager.__sprites[a] = new FZ.Sprite(c);
                    FZ.spriteManager.__sprites[a].setPosition(e, d);
                    FZ.spriteManager.__sprites[a].setZ(b)
                }
            })
        },
        getSprite: function (a) {
            return this.__sprites[a]
        },
        getSpritesArrayByTag: function (a) {
            var b = [];
            for (i in FZ.ImageTags[a])
                b.push(this.getSprite(FZ.ImageTags[a][i].name));
            return b
        },
        getSpritesObjectByTag: function (a) {
            var b = {};
            for (i in FZ.ImageTags[a]) {
                var c = FZ.ImageTags[a][i].name;
                b[c] = FZ.spriteManager.getSprite(c)
            }
            return b
        }
    };
    FZ.EngineOptions.IsCanvasVersion || (FZ.Sprite = FZ.CSSSprite,
        FZ.spriteManager = FZ.CSSSpriteManager)
}
)();
(function () {
    FZ.GameStateBase = FZ.newClass({
        StateName: "GameStateBase",
        __initilized: !1,
        StateDiv: null,
        IsActive: !1,
        init: function () {
            FZ.GameBase.registerState(this.StateName, this);
            this.StateSprite = new FZ.CSSSprite;
            this.StateSprite.setZ(-1);
            this.StateSprite.setOpacity(0);
            FZ.EngineOptions.IsCanvasVersion && (this.StateCanvas = document.createElement("canvas"),
                this.StateCanvas.style.zIndex = 0,
                this.StateContext = this.StateCanvas.getContext("2d"),
                this.StateSprite.__Div.appendChild(this.StateCanvas))
        },
        stateInit: function () { },
        stateInitBase: function () {
            this.StateCanvas.width = FZ.GameBase.Width * FZ.GameBase.PixelScale;
            this.StateCanvas.height = FZ.GameBase.Height * FZ.GameBase.PixelScale
        },
        preProcess: function () { },
        postProcess: function () { },
        AIUpdate: function (a) { },
        visualUpdate: function () { },
        destory: function () {
            this.StateCanvas && (this.StateCanvas.height = 1,
                this.StateCanvas.width = 1)
        }
    });
    var a = function (a) {
        FZ.GameBase.IsOrientationCorrect() ? (FZ.GameBase.RotateMsgDiv.style.display = "none",
            FZ.GameBase.MainDiv.style.display = "inline") : (FZ.GameBase.RotateMsgDiv.style.display = "inline",
                FZ.GameBase.MainDiv.style.display = "none")
    }
        , b = function (a) {
            FZ.GameBase.IsOrientationCorrect() ? "iPhone" === FZ.Browser || "iPod" === FZ.Browser ? window.setTimeout(function () {
                window.scrollTo(0, 20)
            }, 0) : window.setTimeout(function () {
                window.scrollTo(0, 1)
            }, 0) : window.setTimeout(function () {
                window.scrollTo(0, 1)
            }, 0)
        };
    FZ.GameBase = {
        FrameNum: 0,
        Fps: 0,
        Fps_lastTime: 0,
        Fps_lastFrame: 0,
        DefaultFPS: 30,
        StateStack: [],
        __StateLib: {},
        Width: 640,
        Height: 480,
        MainCanvas: null,
        MainContext: null,
        Name: "",
        SaveObject: {},
        Version: "0.0",
        PixelScale: 1,
        Paused: !1,
        init_CSS: function (a) {
            this.MainDiv = a;
            this.MainDiv.style.overflow = "hidden";
            this.MainDiv.style.width = Math.ceil(this.Width * this.PixelScale) + "px";
            this.MainDiv.style.height = Math.ceil(this.Height * this.PixelScale) + "px";
            this.MainDiv.style.position = "absolute";
            this.StateStack.push(new FZ.GameStateBase);
            this.MainDiv.appendChild(this.StateStack[0].StateSprite.__Div);
            this.StateStack[0].StateSprite.__Div.style.display = "inline";
            this.StateStack[0].StateSprite.__Div.style.width = this.MainDiv.style.width;
            this.StateStack[0].StateSprite.__Div.style.height = this.MainDiv.style.height;
            this.StateStack[0].StateSprite.__Div.style.top = "0px";
            this.StateStack[0].StateSprite.__Div.style.left = "0px";
            this.StateStack[0].StateSprite.__Div.style.opacity = 1
        },
        init_canvas: function (a) {
            var b = document.createElement("meta");
            b.setAttribute("name", "viewport");
            if ("iPad" === FZ.Browser) {
                var d = this.IsLandscape ? 2.15625 : 946 / 480;
                b.setAttribute("content", "width=device-width; initial-scale=" + d + "; minimum-scale=" + d + "; maximum-scale=" + d + "; user-scalable=no;")
            } else
                b.setAttribute("content", "width=device-width; initial-scale=1.0; minimum-scale=1.0; maximum-scale=1.0; user-scalable=no;");
            document.getElementsByTagName("head")[0].appendChild(b);
            document.body.style.padding = "0px";
            document.body.style.margin = "0px";
            this.init_CSS(a);
            this.MainDiv.style.zIndex = 1E3;
            "Other" === FZ.Browser ? (this.MainDiv.addEventListener("mousemove", FZ.Tools.bindWithEvent(FZ.ControlManager, FZ.ControlManager.MouseMove), !1),
                this.MainDiv.addEventListener("mousedown", FZ.Tools.bindWithEvent(FZ.ControlManager, FZ.ControlManager.MouseDown), !1),
                this.MainDiv.addEventListener("mouseup", FZ.Tools.bindWithEvent(FZ.ControlManager, FZ.ControlManager.MouseUp), !1)) : (this.MainDiv.addEventListener("touchmove", FZ.Tools.bindWithEvent(FZ.ControlManager, FZ.ControlManager.TouchMove), !1),
                    this.MainDiv.addEventListener("touchstart", FZ.Tools.bindWithEvent(FZ.ControlManager, FZ.ControlManager.TouchStart), !1),
                    this.MainDiv.addEventListener("touchend", FZ.Tools.bindWithEvent(FZ.ControlManager, FZ.ControlManager.TouchEnd), !1));
            window.addEventListener("pagehide", FZ.GameBase.pageHide, !1);
            window.addEventListener("pageshow", FZ.GameBase.pageShow, !1);
            FZ.GameState_Splash.initSplash();
            this.NextFrameTime = this.Time = (new Date).getTime();
            this.update()
        },
        init: function (c, e, d, f, g, h) {
            var m = new Image;
            var width = 320;
            var height = 480;
            f ? (this.IsLandscape = !0,
                this.Width = width,
                this.Height = height,
                m.src = FZ.SystemImages.toLandscape) : (this.IsLandscape = !1,
                    this.Width = width,
                    this.Height = height,
                    m.src = FZ.SystemImages.toPortrait);
            d.style.width = width + "px";
            d.style.height = height + "px";
            d.appendChild(m);
            FZ.GameBase.RotateMsgDiv = d;
            FZ.GameState_Splash.userStartState = g;
            this.Name = c;
            h && (this.Version = h);
            document.addEventListener("touchstart", function (a) {
                a.preventDefault()
            }, !1);
            window.addEventListener("orientationchange", a, !1);
            window.addEventListener("scroll", b, !1);
            FZ.EngineOptions.IsCanvasVersion ? this.init_canvas(e) : this.init_CSS(e);
            a();
            b()
        },
        update: function () {
            var a = (new Date).getTime()
                , b = (a - this.Time) / 1E3;
            this.Time = a;
            if (this.IsOrientationCorrect()) {
                1 < b && (b = 1);
                this.FrameNum++;
                1E3 < this.Time - this.Fps_lastTime && (this.Fps = Math.round(10 * (this.FrameNum - this.Fps_lastFrame) / ((this.Time - this.Fps_lastTime) / 1E3)) / 10,
                    this.Fps_lastTime = this.Time,
                    this.Fps_lastFrame = this.FrameNum);
                if (!FZ.StateTransition.inTransition())
                    if (FZ.ControlManager.PreUpdate(),
                        "Other" !== FZ.Browser)
                        try {
                            this.StateStack[this.StateStack.length - 1].AIUpdate(b)
                        } catch (d) {
                            FZ._error(d)
                        }
                    else
                        this.StateStack[this.StateStack.length - 1].AIUpdate(b);
                for (a = 0; a < this.StateStack.length; ++a)
                    if ("Other" !== FZ.Browser)
                        try {
                            this.StateStack[a].visualUpdate()
                        } catch (f) {
                            FZ._error(f)
                        }
                    else
                        this.StateStack[a].visualUpdate();
                FZ.ControlManager.PostUpdate();
                this.NextFrameTime += 1E3 / this.DefaultFPS;
                var g = this.NextFrameTime - (new Date).getTime();
                0 > g && (this.NextFrameTime -= g,
                    g = 0)
            }
            FZ.GameBase.Paused || setTimeout(function () {
                FZ.GameBase.update()
            }, g)
        },
        saveGame: function () {
            FZ._assert("" !== this.Name, "Please set the name of the game first");
            localStorage.removeItem("FZ.Game." + this.Name);
            localStorage.setItem("FZ.Game." + this.Name, FZ.JSON.stringify(this.SaveObject))
        },
        loadGame: function () {
            FZ._assert("" !== this.Name, "Please set the name of the game first");
            if ("" === this.Name)
                return !1;
            if (!localStorage.hasOwnProperty("FZ.Game." + this.Name))
                return this.SaveObject = {},
                    !1;
            this.SaveObject = FZ.JSON.parse(localStorage["FZ.Game." + this.Name]);
            return !0
        },
        registerState: function (a, b) {
            this.__StateLib[a] = b
        },
        removeState: function (a) {
            this.__StateLib[a] && (this.__StateLib[a].destory(),
                delete this.__StateLib[a])
        },
        __getTransitor: function (a, b) {
            void 0 === b && (b = new FZ.StateTransition.Immediatly);
            b.setNextState(a);
            return b
        },
        switchToState: function (a, b) {
            this.__getTransitor(a, b).switchToState()
        },
        pushState: function (a, b) {
            this.__getTransitor(a, b).pushState()
        },
        popState: function (a) {
            this.__getTransitor(null, a).popState()
        },
        IsOrientationCorrect: function () {
            return "Other" === FZ.Browser ? !0 : !(90 === Math.abs(window.orientation) ^ this.IsLandscape)
        },
        pageHide: function () {
            FZ.GameBase.Paused = !0
        },
        pageShow: function () {
            FZ.GameBase.Paused = !1;
            FZ.GameBase.update()
        }
    };
    FZ.GameState_Splash = new (FZ.newClass({
        StateName: "SplashScreen",
        userStartState: "",
        SplashSprite: null,
        initSplash: function () {
            var a = new Image
                , b = this;
            a.onload = function () {
                b.SplashSprite = new FZ.Sprite([this], 320, 320);
                FZ.GameBase.IsLandscape ? b.SplashSprite.makeTranslate(80, 0) : b.SplashSprite.makeTranslate(0, 80);
                FZ.GameBase.switchToState(b.StateName, new FZ.StateTransition.Transparent(1E3))
            }
                ;
            a.src = FZ.SystemImages.spilSplash
        },
        preProcess: function () {
            var a = this;
            this.SplashSprite.draw(a.StateContext);
            window.setTimeout(function () {
                FZ.GameBase.switchToState(a.userStartState, new FZ.StateTransition.Transparent(1E3))
            }, 0)
        },
        postProcess: function () {
            FZ.GameBase.removeState(this.StateName)
        }
    }, FZ.GameStateBase))
}
)();
(function () {
    FZ.Math = {
        lerp: function (a, b, c) {
            a = 0 > a ? 0 : 1 < a ? 1 : a;
            return c * a + (1 - a) * b
        },
        random: function (a, b) {
            return FZ.Math.lerp(Math.random(), a, b)
        },
        clamp: function (a, b, c) {
            return a < b ? b : a > c ? c : a
        },
        round: function (a, b) {
            b = Math.pow(10, b || 0);
            return Math.round(a * b) / b
        },
        Vector2: FZ.newClass({
            x: 0,
            y: 0,
            init: function (a, b) {
                this.set(a, b)
            },
            set: function (a, b) {
                this.x = a ? a : 0;
                this.y = b ? b : 0
            },
            clone: function () {
                return new FZ.Math.Vector2(this.x, this.y)
            },
            add: function (a, b) {
                void 0 === b && (b = new FZ.Math.Vector2);
                b.x = this.x + a.x;
                b.y = this.y + a.y;
                return b
            },
            sub: function (a, b) {
                void 0 === b && (b = new FZ.Math.Vector2);
                b.x = this.x - a.x;
                b.y = this.y - a.y;
                return b
            },
            normalize: function (a) {
                void 0 === a && (a = new FZ.Math.Vector2);
                var b = 1 / this.length();
                a.x = this.x * b;
                a.y = this.y * b;
                return a
            },
            scale: function (a, b) {
                void 0 === b && (b = new FZ.Math.Vector2);
                b.x = this.x * a;
                b.y = this.y * a;
                return b
            },
            applyTransform: function (a, b) {
                void 0 === b && (b = new FZ.Math.Vector2);
                var c = a.m12 * this.x + a.m22 * this.y + a.dy;
                b.x = a.m11 * this.x + a.m21 * this.y + a.dx;
                b.y = c;
                return b
            },
            dot: function (a) {
                return this.x * a.x + this.y * a.y
            },
            length: function () {
                return Math.sqrt(this.x * this.x + this.y * this.y)
            },
            lengthSquared: function () {
                return this.x * this.x + this.y * this.y
            },
            distanceSqrTo: function (a) {
                var b = this.x - a.x;
                a = this.y - a.y;
                return b * b + a * a
            },
            distanceTo: function (a) {
                return Math.sqrt(this.distanceSqrTo(a))
            },
            equaTo: function (a) {
                return this.x === a.x && this.y === a.y
            }
        }),
        Matrix3: FZ.newClass({
            m11: 1,
            m21: 0,
            dx: 0,
            m12: 0,
            m22: 1,
            dy: 0,
            set: function (a, b, c, e, d, f) {
                this.m11 = a;
                this.m21 = c;
                this.dx = d;
                this.m12 = b;
                this.m22 = e;
                this.dy = f;
                return this
            },
            clone: function () {
                var a = new FZ.Math.Matrix3;
                a.m11 = this.m11;
                a.m21 = this.m21;
                a.m12 = this.m12;
                a.m22 = this.m22;
                a.dx = this.dx;
                a.dy = this.dy;
                return a
            },
            identity: function () {
                this.m11 = 1;
                this.m12 = this.dx = this.m21 = 0;
                this.m22 = 1;
                this.dy = 0;
                return this
            },
            mul: function (a, b) {
                void 0 === b && (b = new FZ.Math.Matrix3);
                var c = this.m11 * a.m21 + this.m21 * a.m22
                    , e = this.m12 * a.m11 + this.m22 * a.m12
                    , d = this.m12 * a.m21 + this.m22 * a.m22
                    , f = this.dx + this.m11 * a.dx + this.m21 * a.dx
                    , g = this.dy + this.m12 * a.dx + this.m22 * a.dy;
                b.m11 = this.m11 * a.m11 + this.m21 * a.m12;
                b.m21 = c;
                b.m12 = e;
                b.m22 = d;
                b.dx = f;
                b.dy = g;
                return b
            },
            makeRotate: function (a) {
                var b = Math.sin(a);
                this.m11 = a = Math.cos(a);
                this.m21 = -b;
                this.m12 = b;
                this.m22 = a;
                return this
            },
            rotate: function (a) {
                var b = Math.sin(a);
                a = Math.cos(a);
                var c = -this.m11 * b + this.m21 * a
                    , e = this.m12 * a + this.m22 * b
                    , d = -this.m12 * b + this.m22 * a;
                this.m11 = this.m11 * a + this.m21 * b;
                this.m21 = c;
                this.m12 = e;
                this.m22 = d;
                return this
            },
            makeScale1: function (a) {
                return this.makeScale2(a, a)
            },
            scale1: function (a) {
                return this.scale2(a, a)
            },
            makeScale2: function (a, b) {
                this.m11 = a;
                this.m22 = b;
                this.m21 = this.m12 = 0;
                return this
            },
            scale2: function (a, b) {
                this.m11 *= a;
                this.m21 *= b;
                this.m12 *= a;
                this.m22 *= b;
                return this
            },
            makeTranslate: function (a, b) {
                this.dx = a;
                this.dy = b;
                return this
            },
            translate: function (a, b) {
                this.dx += this.m11 * a + this.m21 * b;
                this.dy += this.m12 * a + this.m22 * b;
                return this
            },
            inverseAffine: function (a) {
                void 0 === a && (a = new FZ.Math.Matrix3);
                var b = 1 / (this.m11 * this.m22 - this.m21 * this.m12)
                    , c = this.m22 * b
                    , e = this.m12 * b
                    , d = this.m21 * b
                    , b = this.m11 * b
                    , f = -(c * this.dx + e * this.dy)
                    , g = -(d * this.dx + b * this.dy);
                a.m11 = c;
                a.m21 = e;
                a.m12 = d;
                a.m22 = b;
                a.dx = f;
                a.dy = g;
                return a
            },
            equaTo: function (a) {
                return this.m11 === a.m11 && this.m21 === a.m21 && this.dx === a.dx && this.m12 === a.m12 && this.m22 === a.m22 && this.dy === a.dy
            },
            copyFrom: function (a) {
                this.m11 = a.m11;
                this.m21 = a.m21;
                this.m12 = a.m12;
                this.m22 = a.m22;
                this.dx = a.dx;
                this.dy = a.dy
            }
        })
    }
}
)();
(function () {
    function a(a) {
        d.lastIndex = 0;
        return d.test(a) ? '"' + a.replace(d, function (a) {
            var b = h[a];
            return "string" === typeof b ? b : "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4)
        }) + '"' : '"' + a + '"'
    }
    function b(c, e) {
        var d, h, p, r, s = f, n, l = e[c];
        l && "object" === typeof l && "function" === typeof l.toJSON && (l = l.toJSON(c));
        "function" === typeof m && (l = m.call(e, c, l));
        switch (typeof l) {
            case "string":
                return a(l);
            case "number":
                return isFinite(l) ? String(l) : "null";
            case "boolean":
            case "null":
                return String(l);
            case "object":
                if (!l)
                    return "null";
                f += g;
                n = [];
                if ("[object Array]" === Object.prototype.toString.apply(l)) {
                    r = l.length;
                    for (d = 0; d < r; d += 1)
                        n[d] = b(d, l) || "null";
                    p = 0 === n.length ? "[]" : f ? "[\n" + f + n.join(",\n" + f) + "\n" + s + "]" : "[" + n.join(",") + "]";
                    f = s;
                    return p
                }
                if (m && "object" === typeof m)
                    for (r = m.length,
                        d = 0; d < r; d += 1)
                        h = m[d],
                            "string" === typeof h && (p = b(h, l)) && n.push(a(h) + (f ? ": " : ":") + p);
                else
                    for (h in l)
                        Object.hasOwnProperty.call(l, h) && (p = b(h, l)) && n.push(a(h) + (f ? ": " : ":") + p);
                p = 0 === n.length ? "{}" : f ? "{\n" + f + n.join(",\n" + f) + "\n" + s + "}" : "{" + n.join(",") + "}";
                f = s;
                return p
        }
        return ""
    }
    function c(a) {
        return 10 > a ? "0" + a : a
    }
    FZ.JSON = {
        parse: function (a, b) {
            function c(a, e) {
                var d, f, g = a[e];
                if (g && "object" === typeof g)
                    for (d in g)
                        Object.hasOwnProperty.call(g, d) && (f = c(g, d),
                            void 0 !== f ? g[d] = f : delete g[d]);
                return b.call(a, e, g)
            }
            var d;
            a = String(a);
            e.lastIndex = 0;
            e.test(a) && (a = a.replace(e, function (a) {
                return "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4)
            }));
            if (/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:\s*\[)+/g, "")))
                return d = eval("(" + a + ")"),
                    "function" === typeof b ? c({
                        "": d
                    }, "") : d;
            throw new SyntaxError("JSON.parse");
        },
        stringify: function (a, c, e) {
            var d;
            g = f = "";
            if ("number" === typeof e)
                for (d = 0; d < e; d += 1)
                    g += " ";
            else
                "string" === typeof e && (g = e);
            if ((m = c) && "function" !== typeof c && ("object" !== typeof c || "number" !== typeof c.length))
                throw Error("JSON.stringify");
            return b("", {
                "": a
            })
        }
    };
    var e = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, d = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, f, g, h = {
        "\b": "\\b",
        "\t": "\\t",
        "\n": "\\n",
        "\f": "\\f",
        "\r": "\\r",
        '"': '\\"',
        "\\": "\\\\"
    }, m;
    "function" !== typeof Date.prototype.toJSON && (Date.prototype.toJSON = function (a) {
        return isFinite(this.valueOf()) ? this.getUTCFullYear() + "-" + c(this.getUTCMonth() + 1) + "-" + c(this.getUTCDate()) + "T" + c(this.getUTCHours()) + ":" + c(this.getUTCMinutes()) + ":" + c(this.getUTCSeconds()) + "Z" : null
    }
        ,
        String.prototype.toJSON = Number.prototype.toJSON = Boolean.prototype.toJSON = function (a) {
            return this.valueOf()
        }
    )
}
)();
(function () {
    FZ.ControlManager = {
        Mouse: {
            x: -1,
            y: -1,
            leftKey: !1,
            middleKey: !1,
            rightKey: !1,
            mouseUp: !1,
            mouseDown: !1
        },
        __GetMousePos: function (a) {
            this.Mouse.x = a.pageX - FZ.GameBase.MainDiv.offsetLeft;
            this.Mouse.y = a.pageY - FZ.GameBase.MainDiv.offsetTop;
            this.Mouse.x /= FZ.GameBase.PixelScale;
            this.Mouse.y /= FZ.GameBase.PixelScale
        },
        MouseMove: function (a) {
            this.__GetMousePos(a)
        },
        MouseUp: function (a) {
            0 === a.button && (this.Mouse.leftKey = !1,
                this.Mouse.mouseUp = !0)
        },
        MouseDown: function (a) {
            0 === a.button && (this.__GetMousePos(a),
                this.Mouse.leftKey = !0,
                this.Mouse.mouseDown = !0)
        },
        __GetTouchPos: function (a) {
            this.Mouse.x = a.touches[0].pageX - FZ.GameBase.MainDiv.offsetLeft;
            this.Mouse.y = a.touches[0].pageY - FZ.GameBase.MainDiv.offsetTop;
            this.Mouse.x /= FZ.GameBase.PixelScale;
            this.Mouse.y /= FZ.GameBase.PixelScale
        },
        TouchMove: function (a) {
            this.__GetTouchPos(a)
        },
        TouchStart: function (a) {
            this.__GetTouchPos(a);
            this.Mouse.leftKey = !0;
            this.Mouse.mouseDown = !0
        },
        TouchEnd: function (a) {
            this.Mouse.leftKey = !1;
            this.Mouse.mouseUp = !0
        },
        PreUpdate: function () {
            this.Mouse.leftKey || this.Mouse.mouseUp || (this.Mouse.x = -1,
                this.Mouse.y = -1)
        },
        PostUpdate: function () {
            this.Mouse.mouseUp = !1;
            this.Mouse.mouseDown = !1
        }
    }
}
)();
(function () {
    FZ.StateTransition = {
        inTransition: function () {
            return 0 !== this.TransitorQueue.length
        },
        TransitorQueue: [],
        transitionFinished: function () {
            this.TransitorQueue.splice(0, 1);
            this.inTransition() && this._nextTransition()
        },
        _nextTransition: function () {
            this.TransitorQueue[0][1].call(this.TransitorQueue[0][0])
        }
    };
    FZ.StateTransitionBase = FZ.newClass({
        setNextState: function (a) {
            this.oldState = FZ.GameBase.StateStack[FZ.GameBase.StateStack.length - 1];
            this.newState = a ? FZ.GameBase.__StateLib[a] : FZ.GameBase.StateStack[FZ.GameBase.StateStack.length - 2]
        },
        disableOldState: function () {
            this.oldState.postProcess();
            this.oldState.IsActive = !1;
            this.oldState.StateSprite.setZ(-1);
            this.oldState.StateSprite.__Div.style.display = "none";
            this.oldState.StateSprite.__Div.style.webkitTransitionDuration = 0;
            this.oldState.StateSprite.__Div.style.opacity = 1;
            this.oldState.StateSprite.setPosition(0, 0);
            FZ.GameBase.MainDiv.removeChild(this.oldState.StateSprite.__Div)
        },
        initNewState: function () {
            this.newState.__initilized || (this.newState.stateInitBase(),
                this.newState.stateInit(),
                this.newState.__initilized = !0);
            this.newState.preProcess();
            this.newState.IsActive = !0;
            this.newState.StateSprite.__Div.style.display = "inline";
            FZ.GameBase.StateStack.push(this.newState);
            this.newState.StateSprite.setZ(FZ.GameBase.StateStack.length);
            FZ.GameBase.MainDiv.appendChild(this.newState.StateSprite.__Div)
        },
        switchToState: function () {
            FZ.StateTransition.TransitorQueue.push([this, this.switchToState_func]);
            1 === FZ.StateTransition.TransitorQueue.length && FZ.StateTransition._nextTransition()
        },
        pushState: function () {
            FZ.StateTransition.TransitorQueue.push([this, this.pushState_func]);
            1 === FZ.StateTransition.TransitorQueue.length && FZ.StateTransition._nextTransition()
        },
        popState: function () {
            FZ.StateTransition.TransitorQueue.push([this, this.popState_func]);
            1 === FZ.StateTransition.TransitorQueue.length && FZ.StateTransition._nextTransition()
        }
    });
    FZ.StateTransition.Immediatly = FZ.newClass({
        switchToState_func: function () {
            this.disableOldState();
            FZ.GameBase.StateStack.pop();
            this.initNewState();
            this.newState.StateSprite.__Div.style.opacity = 1;
            FZ.StateTransition.transitionFinished()
        },
        pushState_func: function () {
            this.oldState.IsActive = !1;
            this.initNewState();
            this.newState.StateSprite.__Div.style.opacity = 1;
            FZ.StateTransition.transitionFinished()
        },
        popState_func: function () {
            this.disableOldState();
            FZ.GameBase.StateStack.pop();
            this.newState.IsActive = !0;
            this.newState.StateSprite.__Div.style.opacity = 1;
            FZ.StateTransition.transitionFinished()
        }
    }, FZ.StateTransitionBase);
    FZ.StateTransition.Transparent = FZ.newClass({
        init: function (a) {
            this.Duration = a
        },
        switchToState_func: function () {
            this.oldState.StateSprite.__Div.style.webkitTransitionDuration = this.Duration + "ms";
            var a = this;
            FZ.Tools.OnetimeEventListener(this.oldState.StateSprite.__Div, "webkitTransitionEnd", function (b) {
                a.disableOldState();
                FZ.GameBase.StateStack.pop();
                a.newState.StateSprite.__Div.style.webkitTransitionDuration = 0;
                a.newState.StateSprite.__Div.style.opacity = 0;
                a.initNewState();
                window.setTimeout(function () {
                    a.newState.StateSprite.__Div.style.webkitTransitionDuration = a.Duration + "ms";
                    FZ.Tools.OnetimeEventListener(a.newState.StateSprite.__Div, "webkitTransitionEnd", function (a) {
                        FZ.StateTransition.transitionFinished()
                    }, !1, a.Duration);
                    a.newState.StateSprite.__Div.style.opacity = 1
                }, 0)
            }, !1, this.Duration);
            this.oldState.StateSprite.__Div.style.opacity = 0
        },
        pushState_func: function () {
            this.oldState.IsActive = !1;
            this.newState.StateSprite.__Div.style.webkitTransitionDuration = 0;
            this.newState.StateSprite.__Div.style.opacity = 0;
            this.initNewState();
            var a = this;
            window.setTimeout(function () {
                a.newState.StateSprite.__Div.style.webkitTransitionDuration = a.Duration + "ms";
                FZ.Tools.OnetimeEventListener(a.newState.StateSprite.__Div, "webkitTransitionEnd", function (a) {
                    FZ.StateTransition.transitionFinished()
                }, !1, a.Duration);
                a.newState.StateSprite.__Div.style.opacity = 1
            }, 0)
        },
        popState_func: function () {
            this.oldState.StateSprite.__Div.style.webkitTransitionDuration = this.Duration + "ms";
            var a = this;
            FZ.Tools.OnetimeEventListener(this.oldState.StateSprite.__Div, "webkitTransitionEnd", function (b) {
                FZ.StateTransition.transitionFinished();
                a.disableOldState();
                FZ.GameBase.StateStack.pop();
                a.newState.IsActive = !0
            }, !1, this.Duration);
            this.oldState.StateSprite.__Div.style.opacity = 0
        }
    }, FZ.StateTransitionBase);
    FZ.StateTransition.Slide = FZ.newClass({
        init: function (a, b) {
            this.Duration = a;
            this.Direction = b ? b : "right"
        },
        getTargetPos: function (a) {
            var b = 1;
            a && (b = -1);
            switch (this.Direction) {
                case "left":
                    return {
                        x: -FZ.GameBase.Width * FZ.GameBase.PixelScale * b,
                        y: 0
                    };
                case "right":
                    return {
                        x: FZ.GameBase.Width * FZ.GameBase.PixelScale * b,
                        y: 0
                    };
                case "top":
                    return {
                        x: 0,
                        y: -FZ.GameBase.Height * FZ.GameBase.PixelScale * b
                    };
                case "bottom":
                    return {
                        x: 0,
                        y: FZ.GameBase.Height * FZ.GameBase.PixelScale * b
                    }
            }
            return {
                x: 0,
                y: 0
            }
        },
        switchToState_func: function () {
            var a = this.getTargetPos();
            this.oldState.StateSprite.__Div.style.webkitTransitionDuration = this.Duration + "ms";
            var b = this;
            FZ.GameBase.StateStack.pop();
            b.newState.StateSprite.__Div.style.webkitTransitionDuration = 0;
            b.newState.StateSprite.setPosition(a.x, a.y);
            b.newState.StateSprite.__Div.style.opacity = 0;
            b.initNewState();
            window.setTimeout(function () {
                FZ.Tools.OnetimeEventListener(b.oldState.StateSprite.__Div, "webkitTransitionEnd", function (a) {
                    b.disableOldState();
                    FZ.StateTransition.transitionFinished()
                }, !1, b.Duration);
                b.oldState.StateSprite.__Div.style.opacity = 0;
                var a = b.getTargetPos(!0);
                b.oldState.StateSprite.setPosition(a.x, a.y);
                b.newState.StateSprite.__Div.style.webkitTransitionDuration = b.Duration + "ms";
                b.newState.StateSprite.__Div.style.opacity = 1;
                b.newState.StateSprite.setPosition(0, 0)
            }, 0)
        },
        pushState_func: function () {
            var a = this.getTargetPos();
            this.oldState.IsActive = !1;
            this.newState.StateSprite.__Div.style.webkitTransitionDuration = 0;
            this.newState.StateSprite.setPosition(a.x, a.y);
            this.newState.StateSprite.__Div.style.opacity = 0;
            this.initNewState();
            var b = this;
            window.setTimeout(function () {
                b.newState.StateSprite.__Div.style.webkitTransitionDuration = b.Duration + "ms";
                FZ.Tools.OnetimeEventListener(b.newState.StateSprite.__Div, "webkitTransitionEnd", function (a) {
                    FZ.StateTransition.transitionFinished()
                }, !1, b.Duration);
                b.newState.StateSprite.__Div.style.opacity = 1;
                b.newState.StateSprite.setPosition(0, 0)
            }, 0)
        },
        popState_func: function () {
            var a = this.getTargetPos();
            this.oldState.StateSprite.__Div.style.webkitTransitionDuration = this.Duration + "ms";
            var b = this;
            FZ.Tools.OnetimeEventListener(this.oldState.StateSprite.__Div, "webkitTransitionEnd", function (a) {
                FZ.StateTransition.transitionFinished();
                b.disableOldState();
                FZ.GameBase.StateStack.pop();
                b.newState.IsActive = !0
            }, !1, b.Duration);
            this.oldState.StateSprite.__Div.style.opacity = 0;
            this.oldState.StateSprite.setPosition(a.x, a.y)
        }
    }, FZ.StateTransitionBase)
}
)();
(function () {
    FZ.Music = {
        InstAudio: null,
        IsPlaying: !1,
        set: function (a) {
            this.InstAudio = new Audio;
            this.InstAudio.src = a;
            this.InstAudio.addEventListener("ended", function () {
                this.play()
            }, !1);
            FZ.Tools.OnetimeEventListener(document, "touchstart", function () {
                FZ.Music.InstAudio.load()
            }, !0)
        },
        play: function () {
            this.IsPlaying = !0;
            this.InstAudio.play()
        },
        pause: function () {
            this.IsPlaying = !1;
            this.InstAudio.pause()
        },
        pageHide: function (a) {
            FZ.Music.InstAudio && FZ.Music.InstAudio.pause()
        },
        pageShow: function (a) {
            FZ.Music.InstAudio && FZ.Music.IsPlaying && FZ.Music.InstAudio.play()
        }
    };
    window.addEventListener("pagehide", FZ.Music.pageHide, !1);
    window.addEventListener("pageshow", FZ.Music.pageShow, !1)
}
)();
(function () {
    FZ.Rect = FZ.newClass({
        lefttop: null,
        rightbottom: null,
        init: function (a) {
            if (a) {
                for (var b = [], c = [], e = a.length - 1; 0 <= e; --e)
                    b.push(a[e].x),
                        c.push(a[e].y);
                this.lefttop = new FZ.Math.Vector2(Math.min.apply(this, b), Math.min.apply(this, c));
                this.rightbottom = new FZ.Math.Vector2(Math.max.apply(this, b), Math.max.apply(this, c))
            }
        },
        merge: function (a) {
            null !== this.lefttop ? (this.lefttop.x = Math.min(this.lefttop.x, a.lefttop.x),
                this.lefttop.y = Math.min(this.lefttop.y, a.lefttop.y),
                this.rightbottom.x = Math.max(this.rightbottom.x, a.rightbottom.x),
                this.rightbottom.y = Math.max(this.rightbottom.y, a.rightbottom.y)) : (this.lefttop = a.lefttop.clone(),
                    this.rightbottom = a.rightbottom.clone())
        },
        intersect: function (a) {
            null === this.lefttop || null === a.lefttop ? this.reset() : (this.lefttop.x = Math.max(this.lefttop.x, a.lefttop.x),
                this.lefttop.y = Math.max(this.lefttop.y, a.lefttop.y),
                this.rightbottom.x = Math.min(this.rightbottom.x, a.rightbottom.x),
                this.rightbottom.y = Math.min(this.rightbottom.y, a.rightbottom.y),
                (this.lefttop.x >= this.rightbottom.x || this.lefttop.y >= this.rightbottom.y) && this.reset())
        },
        isOverlap: function (a) {
            return null === this.lefttop ? !1 : !(this.rightbottom.x < a.lefttop.x || this.lefttop.x > a.rightbottom.x || this.rightbottom.y < a.lefttop.y || this.lefttop.y > a.rightbottom.y)
        },
        equaTo: function (a) {
            return null === this.lefttop ? !1 : this.lefttop.equaTo(a.lefttop) && this.rightbottom.equaTo(a.rightbottom)
        },
        reset: function () {
            this.rightbottom = this.lefttop = null
        },
        scale: function (a) {
            this.lefttop.scale(a, this.lefttop);
            this.rightbottom.scale(a, this.rightbottom);
            return this
        },
        clone: function () {
            var a = new FZ.Rect;
            a.lefttop = this.lefttop.clone();
            a.rightbottom = this.rightbottom.clone();
            return a
        }
    });
    FZ.DirtyDrawManagerClass = FZ.newClass({
        __dirtyRectLib: {},
        init: function (a) {
            this.__dirtyCanvas = a;
            this.__dirtyContext = a.getContext("2d");
            this.__sprites = [];
            this.__dirtyCanvasRect = new FZ.Rect([{
                x: 0,
                y: 0
            }, {
                x: this.__dirtyCanvas.width,
                y: this.__dirtyCanvas.height
            }])
        },
        getDirtyRect: function (a) {
            this.__dirtyRectLib[a] || (this.__dirtyRectLib[a] = new FZ.Rect,
                this.__dirtyRectLib[a].SpriteCount = 0);
            return this.__dirtyRectLib[a]
        },
        resetDirtyRect: function () {
            for (var a in this.__dirtyRectLib)
                this.__dirtyRectLib[a].reset()
        },
        add: function (a, b) {
            if (!1 === a.$RemoveFromDirty)
                FZ._error("Sprite is added twice!");
            else {
                b || (b = 0);
                if (-1 === b) {
                    do
                        b = Math.floor(FZ.Math.random(1E3, 1E4));
                    while (this.__dirtyRectLib[b])
                }
                var c = this.getDirtyRect(b);
                c.SpriteCount++;
                a.$RemoveFromDirty || this.__sprites.push(a);
                a.__DirtyMatrixProcess();
                a.setDirtyMonitor(c, this);
                a.forceUpdate();
                a.$RemoveFromDirty = !1
            }
        },
        remove: function (a) {
            !1 !== a.$RemoveFromDirty ? FZ._error("Sprite had been removed all not in dirty management!") : (a.forceUpdate(),
                a.$RemoveFromDirty = !0,
                a.getDirtyRect().SpriteCount--)
        },
        isOverlap: function (a) {
            for (var b in this.__dirtyRectLib)
                if (this.__dirtyRectLib[b].isOverlap(a))
                    return !0;
            return !1
        },
        drawDirty: function (a) {
            this.resetDirtyRect();
            for (var b = this.__sprites.length - 1; 0 <= b; --b) {
                var c = this.__sprites[b];
                c.__DirtyMatrixProcess();
                c.$RemoveFromDirty && (this.__sprites.splice(b, 1),
                    c.setDirtyMonitor(null, null),
                    c.$RemoveFromDirty = void 0)
            }
            c = !1;
            this.__dirtyContext.setTransform(1, 0, 0, 1, 0, 0);
            for (var e in this.__dirtyRectLib)
                b = this.__dirtyRectLib[e],
                    b.lefttop && (b.lefttop.x = Math.floor(b.lefttop.x * FZ.GameBase.PixelScale),
                        b.lefttop.y = Math.floor(b.lefttop.y * FZ.GameBase.PixelScale),
                        b.rightbottom.x = Math.ceil(b.rightbottom.x * FZ.GameBase.PixelScale),
                        b.rightbottom.y = Math.ceil(b.rightbottom.y * FZ.GameBase.PixelScale),
                        b.intersect(this.__dirtyCanvasRect),
                        b.lefttop && (c = !0,
                            b.width = b.rightbottom.x - b.lefttop.x,
                            b.height = b.rightbottom.y - b.lefttop.y,
                            this.__dirtyContext.clearRect(b.lefttop.x, b.lefttop.y, b.width, b.height)));
            if (c) {
                for (var b = 0, d = this.__sprites.length; b < d; ++b)
                    this.__sprites[b].draw(this.__dirtyContext);
                a.setTransform(1, 0, 0, 1, 0, 0);
                for (e in this.__dirtyRectLib)
                    b = this.__dirtyRectLib[e],
                        b.lefttop && (a.drawImage(this.__dirtyCanvas, b.lefttop.x, b.lefttop.y, b.width, b.height, b.lefttop.x, b.lefttop.y, b.width, b.height),
                            "info" === FZ.EngineOptions.DebugLevel && (a.strokeStyle = "red",
                                a.strokeRect(b.lefttop.x, b.lefttop.y, b.width, b.height)),
                            0 === b.SpriteCount && delete this.__dirtyRectLib[e])
            }
            return c
        }
    })
}
)();
(function () {
    FZ.SystemImages = {
        toLandscape: "data:image/png;base64,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",
        toPortrait: "data:image/png;base64,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",
        spilSplash: "logo.png"
    }
}
)();
(function () {
    FZ.Button = FZ.newClass({
        Sprite_Up: null,
        callback: null,
        m_observer: null,
        Sprite_Down: null,
        m_dirty: null,
        m_enable: !0,
        m_hide: !1,
        isMouseDown: !1,
        m_timer: 0,
        m_vibration_rate: 0,
        m_vibration: 0,
        m_vibration_x: 0,
        m_vibration_y: 0,
        init: function (a, b, c, e) {
            this.Sprite_Up = a;
            this.Sprite_Down = b;
            this.callback = c;
            e && (e.add(a),
                e.add(b));
            this.m_hide = !1;
            this.Sprite_Down.setOpacity(0);
            this.pos = this.Sprite_Down.getPosition();
            this.size = this.Sprite_Down.getSize();
            this.theOpacity = 0
        },
        setObserver: function (a) {
            this.m_observer = a
        },
        removeObserver: function () {
            this.m_observer = null
        },
        addToDirty: function (a) {
            this.m_dirty = a;
            this.m_dirty.add(this.Sprite_Up);
            this.m_dirty.add(this.Sprite_Down)
        },
        makeTranslate: function (a, b) {
            this.Sprite_Down.makeTranslate(a, b);
            this.Sprite_Up.makeTranslate(a, b);
            this.pos = this.Sprite_Down.getPosition()
        },
        removeFromDirty: function () {
            this.m_dirty && (this.m_dirty.remove(this.Sprite_Up),
                this.m_dirty.remove(this.Sprite_Down))
        },
        reset: function () {
            this.theOpacity = 0;
            this.Sprite_Down.setOpacity(0)
        },
        setHide: function (a) {
            this.m_hide = a;
            this.Sprite_Down.setOpacity(0);
            this.m_hide ? this.Sprite_Up.setOpacity(0) : this.Sprite_Up.setOpacity(1)
        },
        forceUpdate: function () {
            this.Sprite_Up.forceUpdate();
            this.Sprite_Down.forceUpdate()
        },
        setEnable: function (a) {
            (this.m_enable = a) ? this.reset() : this.Sprite_Down.setOpacity(1)
        },
        setVibration: function (a, b, c, e) {
            this.m_vibration = a;
            this.m_vibration_rate = b;
            this.m_vibration_x = c;
            this.m_vibration_y = e;
            this.m_timer = 0
        },
        isVibration: function () {
            return 0 < this.m_vibration ? !0 : !1
        },
        getPosition: function () {
            var a = {};
            a.x = this.Sprite_Up.getPosition().x;
            a.y = this.Sprite_Up.getPosition().y;
            return a
        },
        draw: function (a) {
            this.Sprite_Up.draw(a);
            this.Sprite_Down.draw(a)
        },
        update: function (a) {
            var b = null;
            this.m_hide || (0 < this.m_vibration ? (0 === this.m_timer % this.m_vibration_rate && (this.m_vibration-- ,
                b = this.Sprite_Down.getPosition(),
                b.y !== this.pos.y ? (this.Sprite_Up.makeTranslate(this.pos.x, this.pos.y),
                    this.Sprite_Down.makeTranslate(this.pos.x, this.pos.y)) : (this.Sprite_Up.makeTranslate(this.pos.x, this.pos.y + this.m_vibration_y),
                        this.Sprite_Down.makeTranslate(this.pos.x, this.pos.y + this.m_vibration_y))),
                0 === this.m_vibration && (this.Sprite_Up.makeTranslate(this.pos.x, this.pos.y),
                    this.Sprite_Down.makeTranslate(this.pos.x, this.pos.y)),
                this.m_timer++) : FZ.ControlManager.Mouse.x >= this.pos.x && FZ.ControlManager.Mouse.y >= this.pos.y && FZ.ControlManager.Mouse.x <= this.pos.x + this.size[0] && FZ.ControlManager.Mouse.y <= this.pos.y + this.size[1] ? (FZ.ControlManager.Mouse.mouseDown && (this.isMouseDown = !0),
                    1 !== this.theOpacity && (this.theOpacity += 3 * a,
                        1 < this.theOpacity && (this.theOpacity = 1),
                        this.Sprite_Down.setOpacity(this.theOpacity),
                        this.m_observer && this.m_observer.btnDown(this)),
                    FZ.ControlManager.Mouse.mouseUp && this.isMouseDown ? (this.isMouseDown = !1,
                        this.reset(),
                        this.callback && this.callback(this),
                        this.m_observer && this.m_observer.btnUp(this)) : this.m_observer && this.m_observer.btnMove(this)) : 0 !== this.theOpacity && (this.m_observer && this.m_observer.btnCancel(this),
                            this.theOpacity -= 3 * a,
                            0 > this.theOpacity && (this.theOpacity = 0),
                            this.Sprite_Down.setOpacity(this.theOpacity)))
        }
    })
}
)();
(function () {
    FZ.Switch = FZ.newClass({
        m_state: 0,
        m_sprite_switch_on: null,
        m_sprite_switch_off: null,
        m_observer: null,
        m_callback: null,
        m_dirty: null,
        isMouseDown: !1,
        __changeState: function () {
            this.m_state = FZ.GameDefs.SWITCH_ON === this.m_state ? FZ.GameDefs.SWITCH_OFF : FZ.GameDefs.SWITCH_ON;
            this.__setFrame()
        },
        __setFrame: function () {
            FZ.GameDefs.SWITCH_ON === this.m_state ? (this.m_sprite_switch_on.setOpacity(1),
                this.m_sprite_switch_off.setOpacity(0)) : (this.m_sprite_switch_on.setOpacity(0),
                    this.m_sprite_switch_off.setOpacity(1))
        },
        init: function (a, b) {
            this.m_sprite_switch_on = a;
            this.m_sprite_switch_off = b;
            this.m_state = FZ.GameDefs.SWITCH_ON;
            this.m_sprite_switch_off.setOpacity(0)
        },
        getState: function () {
            return this.m_state
        },
        setState: function (a) {
            this.m_state = a;
            this.__setFrame()
        },
        setCallback: function (a) {
            this.m_callback = a
        },
        removeCallback: function () {
            this.m_callback = null
        },
        setObserver: function (a) {
            this.m_observer = a
        },
        removeObserver: function () {
            this.m_observer = null
        },
        addToDirty: function (a) {
            this.m_dirty = a;
            this.m_dirty.add(this.m_sprite_switch_on);
            this.m_dirty.add(this.m_sprite_switch_off)
        },
        removeFromDirty: function () {
            this.m_dirty && (this.m_dirty.remove(this.m_sprite_switch_on),
                this.m_dirty.remove(this.m_sprite_switch_off))
        },
        update: function (a) {
            a = this.m_sprite_switch_on.getPosition();
            var b = this.m_sprite_switch_on.getSize();
            FZ.ControlManager.Mouse.x >= a.x && FZ.ControlManager.Mouse.y >= a.y && FZ.ControlManager.Mouse.x <= a.x + b[0] && FZ.ControlManager.Mouse.y <= a.y + b[1] && (FZ.ControlManager.Mouse.mouseDown && (this.isMouseDown = !0),
                FZ.ControlManager.Mouse.mouseUp && this.isMouseDown && (this.isMouseDown = !1,
                    this.__changeState(),
                    this.callback && this.callback(this)))
        },
        draw: function (a) {
            this.m_sprite_switch_on.draw(a);
            this.m_sprite_switch_off.draw(a)
        }
    })
}
)();
(function () {
    FZ.GameConfig = {
        SND_BG: "BGMusic",
        SND_FILES: ["./jigsaw_files/res/sound/htmlGemSmash.mp3"],
        GO_MENU_CONFIRM: "Warning: The game progress will be lost if back to menu, are you sure you want to back to menu?",
        JEWEL_ROW: 10,
        JEWEL_COL: 10,
        JEWEL_MAX_NUMBER: 100,
        JEWEL_OFFSET_X: 50,
        JEWEL_OFFSET_Y: 34,
        JEWEL_W: 22,
        JEWEL_H: 22,
        JEWEL_FALL_SPEED: 10,
        BOMB_RANGE_RATE: 0.4,
        POINT_SCORE: 2,
        BASE_SCORE: 20,
        MIN_GET_SCORE_NUM: 9,
        ROW_TOOLS_NUM: 3,
        ADD_SCORE_RATE: 30,
        ADD_BOMB_BASE_NUM: 15,
        MAX_BOMB_NUM: 5,
        MAX_LEVEL: 8,
        MAX_STYLES: [3, 4, 4, 5, 5, 6, 6, 7, 7],
        LEVEL_UP_NUM: [10, 10, 15, 15, 20, 20, 25, 25],
        TOOLS_NUM: [0, 1, 1, 2, 2, 2, 2, 2]
    }
}
)();
(function () {
    FZ.ImageConfig = [{
        name: "ui_game_clear",
        zOrder: 2,
        fileURL: "ui_game_clear.png",
        x: 35,
        y: 10,
        w: 250,
        h: 66,
        tags: ["GameIn"],
        cols: 1
    }, {
        name: "BTN_HINT",
        zOrder: 3,
        fileURL: "BTN_HINT.png",
        x: 60,
        y: 390,
        w: 94,
        h: 46,
        tags: ["GameIn"],
        cols: 1
    }, {
        name: "BTN_HINT_TOUCH",
        zOrder: 2,
        fileURL: "BTN_HINT_TOUCH.png",
        x: 60,
        y: 390,
        w: 94,
        h: 46,
        tags: ["GameIn"],
        cols: 1
    }, {
        name: "BTN_MENU",
        zOrder: 3,
        fileURL: "BTN_MENU.png",
        x: 170,
        y: 390,
        w: 94,
        h: 46,
        tags: ["GameIn"],
        cols: 1
    }, {
        name: "BTN_MENU_TOUCH",
        zOrder: 2,
        fileURL: "BTN_MENU_TOUCH.png",
        x: 170,
        y: 390,
        w: 94,
        h: 46,
        tags: ["GameIn"],
        cols: 1
    }, {
        name: "loading_empty",
        zOrder: 2,
        fileURL: "loading_empty.png",
        x: 6,
        y: 286,
        w: 309,
        h: 52,
        tags: ["Loading"],
        cols: 1
    }, {
        name: "loading_full",
        zOrder: 3,
        fileURL: "loading_full.png",
        x: 6,
        y: 286,
        w: 309,
        h: 52,
        tags: ["Loading"],
        cols: 1
    }, {
        name: "LOADING_BG",
        zOrder: 2,
        fileURL: "MAIN_MENU_AND_LOADING_BG.png",
        x: 28,
        y: 30,
        w: 265,
        h: 155,
        tags: ["Loading"],
        cols: 1
    }, {
        name: "GENERAL_BG",
        zOrder: 0,
        fileURL: "GENERAL_BG.png",
        x: 0,
        y: 0,
        w: 320,
        h: 480,
        tags: ["Loading"],
        cols: 1
    }, {
        name: "game_in_BG",
        zOrder: 1,
        fileURL: "game_in_BG.png",
        x: 17,
        y: 23,
        w: 287,
        h: 367,
        tags: ["GameIn"],
        cols: 1
    }, {
        name: "hint_frame",
        zOrder: 1,
        fileURL: "hint_frame.png",
        x: 33,
        y: 55,
        w: 259,
        h: 318,
        tags: ["hint"],
        cols: 1
    }, {
        name: "BTN_MAIN_MENU",
        zOrder: 4,
        fileURL: "BTN_MAIN_MENU.png",
        x: 40,
        y: 378,
        w: 240,
        h: 66,
        tags: ["win"],
        cols: 1
    }, {
        name: "BTN_MAIN_MENU_TOUCH",
        zOrder: 4,
        fileURL: "BTN_MAIN_MENU_TOUCH.png",
        x: 40,
        y: 378,
        w: 240,
        h: 66,
        tags: ["win"],
        cols: 1
    }, {
        name: "BTN_NEXT_LEVEL",
        zOrder: 4,
        fileURL: "BTN_NEXT_LEVEL.png",
        x: 40,
        y: 368,
        w: 240,
        h: 66,
        tags: ["NextLevel"],
        cols: 1
    }, {
        name: "BTN_NEXT_LEVEL_TOUCH",
        zOrder: 4,
        fileURL: "BTN_NEXT_LEVEL_TOUCH.png",
        x: 40,
        y: 368,
        w: 240,
        h: 66,
        tags: ["NextLevel"],
        cols: 1
    }, {
        name: "BTN_PLAY",
        zOrder: 4,
        fileURL: "BTN_PLAY.png",
        x: 40,
        y: 368,
        w: 240,
        h: 66,
        tags: ["NextLevel"],
        cols: 1
    }, {
        name: "BTN_PLAY_TOUCH",
        zOrder: 4,
        fileURL: "BTN_PLAY_TOUCH.png",
        x: 40,
        y: 368,
        w: 240,
        h: 66,
        tags: ["NextLevel"],
        cols: 1
    }, {
        name: "BTN_GAME_START",
        zOrder: 2,
        fileURL: "BTN_START.png",
        x: 40,
        y: 264,
        w: 240,
        h: 66,
        tags: ["MainMenu"],
        cols: 1
    }, {
        name: "BTN_GAME_START_TOUCH",
        zOrder: 2,
        fileURL: "BTN_START_TOUCH.png",
        x: 40,
        y: 264,
        w: 240,
        h: 66,
        tags: ["MainMenu"],
        cols: 1
    }, {
        name: "BTN_SOUND",
        zOrder: 2,
        fileURL: "BTN_SOUND.png",
        x: 277,
        y: 393,
        w: 37,
        h: 37,
        tags: ["GameIn"],
        cols: 1
    }, {
        name: "BTN_SOUND_OFF",
        zOrder: 2,
        fileURL: "BTN_SOUND_OFF.png",
        x: 277,
        y: 393,
        w: 37,
        h: 37,
        tags: ["GameIn"],
        cols: 1
    }, {
        name: "pic_1",
        zOrder: 0,
        fileURL: "pics/pic_1.jpg",
        x: 0,
        y: 0,
        w: 279,
        h: 360,
        tags: [],
        cols: 3,
        rows: 4
    }, {
        name: "pic_2",
        zOrder: 0,
        fileURL: "pics/pic_2.jpg",
        x: 0,
        y: 0,
        w: 279,
        h: 360,
        tags: [],
        cols: 3,
        rows: 4
    }, {
        name: "pic_3",
        zOrder: 0,
        fileURL: "pics/pic_3.jpg",
        x: 0,
        y: 0,
        w: 279,
        h: 360,
        tags: [],
        cols: 3,
        rows: 4
    }, {
        name: "pic_4",
        zOrder: 0,
        fileURL: "pics/pic_4.jpg",
        x: 0,
        y: 0,
        w: 280,
        h: 360,
        tags: [],
        cols: 4,
        rows: 5
    }, {
        name: "pic_5",
        zOrder: 0,
        fileURL: "pics/pic_5.jpg",
        x: 0,
        y: 0,
        w: 280,
        h: 360,
        tags: [],
        cols: 4,
        rows: 5
    }, {
        name: "pic_6",
        zOrder: 0,
        fileURL: "pics/pic_6.jpg",
        x: 0,
        y: 0,
        w: 280,
        h: 360,
        tags: [],
        cols: 4,
        rows: 5
    }, {
        name: "pic_7",
        zOrder: 0,
        fileURL: "pics/pic_7.jpg",
        x: 0,
        y: 0,
        w: 280,
        h: 360,
        tags: [],
        cols: 4,
        rows: 5
    }, {
        name: "pic_8",
        zOrder: 0,
        fileURL: "pics/pic_8.jpg",
        x: 0,
        y: 0,
        w: 280,
        h: 360,
        tags: [],
        cols: 5,
        rows: 6
    }, {
        name: "pic_9",
        zOrder: 0,
        fileURL: "pics/pic_9.jpg",
        x: 0,
        y: 0,
        w: 280,
        h: 360,
        tags: [],
        cols: 5,
        rows: 6
    }, {
        name: "pic_10",
        zOrder: 0,
        fileURL: "pics/pic_10.jpg",
        x: 0,
        y: 0,
        w: 280,
        h: 360,
        tags: [],
        cols: 5,
        rows: 6
    }, {
        name: "pic_11",
        zOrder: 0,
        fileURL: "pics/pic_11.jpg",
        x: 0,
        y: 0,
        w: 280,
        h: 360,
        tags: [],
        cols: 5,
        rows: 6
    }];
    FZ.DebugImageConfig = [{
        name: "ui_game_clear",
        zOrder: 2,
        fileURL: "ui_game_clear.png",
        x: 35,
        y: 10,
        w: 250,
        h: 66,
        tags: ["GameIn"],
        cols: 1
    }, {
        name: "BTN_HINT",
        zOrder: 3,
        fileURL: "BTN_HINT.png",
        x: 40,
        y: 390,
        w: 94,
        h: 46,
        tags: ["GameIn"],
        cols: 1
    }, {
        name: "BTN_HINT_TOUCH",
        zOrder: 2,
        fileURL: "BTN_HINT_TOUCH.png",
        x: 40,
        y: 390,
        w: 94,
        h: 46,
        tags: ["GameIn"],
        cols: 1
    }, {
        name: "BTN_MENU",
        zOrder: 3,
        fileURL: "BTN_MENU.png",
        x: 140,
        y: 390,
        w: 94,
        h: 46,
        tags: ["GameIn"],
        cols: 1
    }, {
        name: "BTN_MENU_TOUCH",
        zOrder: 2,
        fileURL: "BTN_MENU_TOUCH.png",
        x: 140,
        y: 390,
        w: 94,
        h: 46,
        tags: ["GameIn"],
        cols: 1
    }, {
        name: "loading_empty",
        zOrder: 2,
        fileURL: "loading_empty.png",
        x: 6,
        y: 286,
        w: 309,
        h: 52,
        tags: ["Loading"],
        cols: 1
    }, {
        name: "loading_full",
        zOrder: 3,
        fileURL: "loading_full.png",
        x: 6,
        y: 286,
        w: 309,
        h: 52,
        tags: ["Loading"],
        cols: 1
    }, {
        name: "LOADING_BG",
        zOrder: 2,
        fileURL: "MAIN_MENU_AND_LOADING_BG.png",
        x: 28,
        y: 30,
        w: 265,
        h: 155,
        tags: ["Loading"],
        cols: 1
    }, {
        name: "GENERAL_BG",
        zOrder: 0,
        fileURL: "GENERAL_BG.png",
        x: 0,
        y: 0,
        w: 320,
        h: 480,
        tags: ["Loading"],
        cols: 1
    }, {
        name: "game_in_BG",
        zOrder: 1,
        fileURL: "game_in_BG.png",
        x: 17,
        y: 23,
        w: 287,
        h: 367,
        tags: ["GameIn"],
        cols: 1
    }, {
        name: "hint_frame",
        zOrder: 1,
        fileURL: "hint_frame.png",
        x: 33,
        y: 55,
        w: 259,
        h: 318,
        tags: ["hint"],
        cols: 1
    }, {
        name: "BTN_MAIN_MENU",
        zOrder: 4,
        fileURL: "BTN_MAIN_MENU.png",
        x: 40,
        y: 378,
        w: 240,
        h: 66,
        tags: ["win"],
        cols: 1
    }, {
        name: "BTN_MAIN_MENU_TOUCH",
        zOrder: 4,
        fileURL: "BTN_MAIN_MENU_TOUCH.png",
        x: 40,
        y: 378,
        w: 240,
        h: 66,
        tags: ["win"],
        cols: 1
    }, {
        name: "BTN_NEXT_LEVEL",
        zOrder: 4,
        fileURL: "BTN_NEXT_LEVEL.png",
        x: 40,
        y: 368,
        w: 240,
        h: 66,
        tags: ["NextLevel"],
        cols: 1
    }, {
        name: "BTN_NEXT_LEVEL_TOUCH",
        zOrder: 4,
        fileURL: "BTN_NEXT_LEVEL_TOUCH.png",
        x: 40,
        y: 368,
        w: 240,
        h: 66,
        tags: ["NextLevel"],
        cols: 1
    }, {
        name: "BTN_PLAY",
        zOrder: 4,
        fileURL: "BTN_PLAY.png",
        x: 40,
        y: 368,
        w: 240,
        h: 66,
        tags: ["NextLevel"],
        cols: 1
    }, {
        name: "BTN_PLAY_TOUCH",
        zOrder: 4,
        fileURL: "BTN_PLAY_TOUCH.png",
        x: 40,
        y: 368,
        w: 240,
        h: 66,
        tags: ["NextLevel"],
        cols: 1
    }, {
        name: "BTN_GAME_START",
        zOrder: 2,
        fileURL: "BTN_START.png",
        x: 40,
        y: 264,
        w: 240,
        h: 66,
        tags: ["MainMenu"],
        cols: 1
    }, {
        name: "BTN_GAME_START_TOUCH",
        zOrder: 2,
        fileURL: "BTN_START_TOUCH.png",
        x: 40,
        y: 264,
        w: 240,
        h: 66,
        tags: ["MainMenu"],
        cols: 1
    }, {
        name: "BTN_SOUND",
        zOrder: 2,
        fileURL: "BTN_SOUND.png",
        x: 277,
        y: 393,
        w: 37,
        h: 37,
        tags: ["GameIn"],
        cols: 1
    }, {
        name: "BTN_SOUND_OFF",
        zOrder: 2,
        fileURL: "BTN_SOUND_OFF.png",
        x: 277,
        y: 393,
        w: 37,
        h: 37,
        tags: ["GameIn"],
        cols: 1
    }, {
        name: "pic_1",
        zOrder: 0,
        fileURL: "pics/pic_1.jpg",
        x: 0,
        y: 0,
        w: 279,
        h: 360,
        tags: [],
        cols: 1,
        rows: 2
    }, {
        name: "pic_2",
        zOrder: 0,
        fileURL: "pics/pic_2.jpg",
        x: 0,
        y: 0,
        w: 279,
        h: 360,
        tags: [],
        cols: 1,
        rows: 2
    }, {
        name: "pic_3",
        zOrder: 0,
        fileURL: "pics/pic_3.jpg",
        x: 0,
        y: 0,
        w: 279,
        h: 360,
        tags: [],
        cols: 1,
        rows: 2
    }, {
        name: "pic_4",
        zOrder: 0,
        fileURL: "pics/pic_4.jpg",
        x: 0,
        y: 0,
        w: 280,
        h: 360,
        tags: [],
        cols: 2,
        rows: 2
    }, {
        name: "pic_5",
        zOrder: 0,
        fileURL: "pics/pic_5.jpg",
        x: 0,
        y: 0,
        w: 280,
        h: 360,
        tags: [],
        cols: 2,
        rows: 2
    }, {
        name: "pic_6",
        zOrder: 0,
        fileURL: "pics/pic_6.jpg",
        x: 0,
        y: 0,
        w: 280,
        h: 360,
        tags: [],
        cols: 2,
        rows: 2
    }, {
        name: "pic_7",
        zOrder: 0,
        fileURL: "pics/pic_7.jpg",
        x: 0,
        y: 0,
        w: 280,
        h: 360,
        tags: [],
        cols: 2,
        rows: 2
    }, {
        name: "pic_8",
        zOrder: 0,
        fileURL: "pics/pic_8.jpg",
        x: 0,
        y: 0,
        w: 280,
        h: 360,
        tags: [],
        cols: 2,
        rows: 2
    }, {
        name: "pic_9",
        zOrder: 0,
        fileURL: "pics/pic_9.jpg",
        x: 0,
        y: 0,
        w: 280,
        h: 360,
        tags: [],
        cols: 2,
        rows: 2
    }, {
        name: "pic_10",
        zOrder: 0,
        fileURL: "pics/pic_10.jpg",
        x: 0,
        y: 0,
        w: 280,
        h: 360,
        tags: [],
        cols: 2,
        rows: 2
    }, {
        name: "pic_11",
        zOrder: 0,
        fileURL: "pics/pic_11.jpg",
        x: 0,
        y: 0,
        w: 280,
        h: 360,
        tags: [],
        cols: 2,
        rows: 2
    }];
    FZ.ImageTags = {};
    for (var a = 0; a < FZ.ImageConfig.length; ++a)
        for (var b = 0; b < FZ.ImageConfig[a].tags.length; ++b)
            FZ.ImageTags.hasOwnProperty(FZ.ImageConfig[a].tags[b]) || (FZ.ImageTags[FZ.ImageConfig[a].tags[b]] = []),
                FZ.ImageTags[FZ.ImageConfig[a].tags[b]].push(FZ.ImageConfig[a]);
    FZ.GetImageInfoByName = function (a) {
        for (var b = null, d = 0; d < FZ.ImageConfig.length; d++)
            if (b = FZ.ImageConfig[d],
                a === b.name)
                return b;
        return null
    }
        ;
    FZ.GetImageConfigByName = function (a) {
        for (var b = FZ.ImageConfig.length - 1; 0 <= b; --b)
            if (FZ.ImageConfig[b].name === a)
                return FZ.ImageConfig[b];
        return null
    }
}
)();
(function () {
    FZ.GameDefs = {
        GO_MENU_CONFIRM: "Warning: The game progress will be lost if back to menu, are you sure you want to back to menu?",
        HINT_X: 45,
        HINT_Y: 65,
        HINT_W: 230,
        HINT_H: 290,
        SCALE_RATE_W: 0.83,
        SCALE_RATE_H: 0.82,
        FONT_COLOR_BLUE: "#29e6ff",
        FONT_COLOR_YELLOW: "#ff8b00",
        TAG_LOAD: "Loading",
        TAG_MAINMENU: "mainmenu",
        TAG_GAME: "game",
        SND_BG: "BGMusic",
        SND_FILES: "./jigsaw_files/res/sound/MermaidJigsaw.mp3",
        DISPLAY_UI: 0,
        DISPLAY_BTN: 1,
        DISPLAY_SWITCH: 2,
        SWITCH_ON: 0,
        SWITCH_OFF: 1,
        SWITCH_STATE_TIME: 500,
        TOTAL_LEVEL: 11,
        STYLE_EASY: 0,
        STYLE_MID: 1,
        STYLE_DIFF: 2,
        BLOCK_OFFSET_X: 20,
        BLOCK_OFFSET_Y: 25,
        TIME_INTERVAL: 1.7,
        CUR_LEVEL: [{
            level: 1,
            pic_name: "pic_1",
            col: 3,
            row: 4,
            block_w: 93,
            block_h: 90
        }, {
            level: 2,
            pic_name: "pic_2",
            col: 3,
            row: 4,
            block_w: 93,
            block_h: 90
        }, {
            level: 3,
            pic_name: "pic_3",
            col: 3,
            row: 4,
            block_w: 93,
            block_h: 90
        }, {
            level: 4,
            pic_name: "pic_4",
            col: 4,
            row: 5,
            block_w: 70,
            block_h: 72
        }, {
            level: 5,
            pic_name: "pic_5",
            col: 4,
            row: 5,
            block_w: 70,
            block_h: 72
        }, {
            level: 6,
            pic_name: "pic_6",
            col: 4,
            row: 5,
            block_w: 70,
            block_h: 72
        }, {
            level: 7,
            pic_name: "pic_7",
            col: 4,
            row: 5,
            block_w: 70,
            block_h: 72
        }, {
            level: 8,
            pic_name: "pic_8",
            col: 5,
            row: 6,
            block_w: 56,
            block_h: 60
        }, {
            level: 9,
            pic_name: "pic_9",
            col: 5,
            row: 6,
            block_w: 56,
            block_h: 60
        }, {
            level: 10,
            pic_name: "pic_10",
            col: 5,
            row: 6,
            block_w: 56,
            block_h: 60
        }, {
            level: 11,
            pic_name: "pic_11",
            col: 5,
            row: 6,
            block_w: 56,
            block_h: 60
        }],
        DEBUG: !1,
        DEBUG_CUR_LEVEL: [{
            level: 1,
            pic_name: "pic_1",
            col: 1,
            row: 2,
            block_w: 279,
            block_h: 180
        }, {
            level: 2,
            pic_name: "pic_2",
            col: 1,
            row: 2,
            block_w: 279,
            block_h: 180
        }, {
            level: 3,
            pic_name: "pic_3",
            col: 1,
            row: 2,
            block_w: 279,
            block_h: 180
        }, {
            level: 4,
            pic_name: "pic_4",
            col: 2,
            row: 2,
            block_w: 140,
            block_h: 180
        }, {
            level: 5,
            pic_name: "pic_5",
            col: 2,
            row: 2,
            block_w: 140,
            block_h: 180
        }, {
            level: 6,
            pic_name: "pic_6",
            col: 2,
            row: 2,
            block_w: 140,
            block_h: 180
        }, {
            level: 7,
            pic_name: "pic_7",
            col: 2,
            row: 2,
            block_w: 140,
            block_h: 180
        }, {
            level: 8,
            pic_name: "pic_8",
            col: 2,
            row: 2,
            block_w: 140,
            block_h: 180
        }, {
            level: 9,
            pic_name: "pic_9",
            col: 2,
            row: 2,
            block_w: 140,
            block_h: 180
        }, {
            level: 10,
            pic_name: "pic_10",
            col: 2,
            row: 2,
            block_w: 140,
            block_h: 180
        }, {
            level: 11,
            pic_name: "pic_11",
            col: 2,
            row: 2,
            block_w: 140,
            block_h: 180
        }],
        getImgInfoByName: function (a) {
            for (var b = 0, c = null, b = 0; b < FZ.ImageConfig.length; b++)
                if (c = FZ.ImageConfig[b],
                    a === c.name)
                    return c;
            return null
        },
        getLevelInfoByLevel: function (a) {
            for (var b = 0, c = null, b = 0; b < this.CUR_LEVEL.length; b++)
                if (c = this.CUR_LEVEL[b],
                    a === c.level)
                    return c;
            return null
        },
        debuggetLevelInfoByLevel: function (a) {
            for (var b = 0, c = null, b = 0; b < this.DEBUG_CUR_LEVEL.length; b++)
                if (c = this.DEBUG_CUR_LEVEL[b],
                    a === c.level)
                    return c;
            return null
        },
        getIndexByName: function (a) {
            for (var b = 0, c = null, b = 0; b < this.BIOMASS_STYLES.length; b++)
                if (c = this.BIOMASS_STYLES[b],
                    a === c.name)
                    return c.index;
            return -1
        }
    }
}
)();
(function () {
    FZ.StateDefs = {
        GAME_STATE_UNKNOW: "",
        GAME_STATE_PRELOADING: "gamepreloading",
        GAME_STATE_LOADING: "gameloading",
        GAME_STATE_MAINMEN: "gamemainmenu",
        GAME_STATE_OPTION: "gameoption",
        GAME_STATE_GAME_IN: "gamein",
        GAME_STATE_GAME_HINT: "gamehint",
        GAME_STATE_COMPLETE: "gamecomplete",
        GAME_STATE_NEXT_LEVEL: "gamenextlevel",
        GAME_STATE_GOTO_MAINMENU: "gamegotomainmenu"
    };
    FZ.CreateTextSprite = function (a, b, c, e, d) {
        e += 2;
        var f = new FZ.CSSSprite;
        f.setSize(c, e);
        f.setPosition(a, b);
        f.__Div.style.textAlign = "center";
        f.__Div.style.lineHeight = e + "px";
        f.__Div.style.fontFamily = "Arial";
        f.__Div.style.fontWeight = "bold";
        f.__Div.style.fontSize = Math.round(e * FZ.GameBase.PixelScale) + "px";
        f.__Div.style.color = d;
        f.setZ(5);
        return f
    }
}
)();
(function () {
    FZ.Pic = FZ.newClass({
        m_sprite: null,
        m_x: 0,
        m_y: 0,
        m_row: 0,
        m_col: 0,
        m_sort_index: 0,
        m_sort_cur_index: 0,
        m_drag_x: 0,
        m_drag_y: 0,
        init: function (a, b, c, e, d, f, g) {
            var h = null;
            this.m_sort_index = f;
            this.m_sort_cur_index = g;
            this.m_row = b;
            this.m_col = c;
            this.m_x = FZ.GameDefs.BLOCK_OFFSET_X + this.m_col * e;
            this.m_y = FZ.GameDefs.BLOCK_OFFSET_Y + this.m_row * d;
            h = FZ.spriteManager.getSprite(a);
            this.m_sprite = h.clone();
            this.m_sprite.setFrame(g);
            this.m_sprite.makeTranslate(this.m_x, this.m_y)
        },
        setSortAfterId: function (a) {
            this.m_sort_cur_index = a
        },
        setFrame: function (a) {
            this.m_sprite.setFrame(a)
        },
        draw: function (a) {
            this.m_sprite.makeTranslate(this.m_x, this.m_y);
            this.m_sprite.draw(a)
        }
    })
}
)();
(function () {
    if (FZ.GameDefs.DEBUG)
        var a = [];
    var b = function (a) {
        var b = [];
        b.push({
            row: Math.floor(a / FZ.Game.GameState.m_picMgr.m_col),
            col: a % FZ.Game.GameState.m_picMgr.m_col
        });
        return b
    };
    FZ.picManager = FZ.newClass({
        m_level: 0,
        m_picBlocks: null,
        m_selBlock: null,
        m_picName: "",
        m_drag_start_Deltax: 0,
        m_drag_start_Deltay: 0,
        m_redraw: !1,
        init: function (a, b) {
            this.m_observer = null;
            this.m_level = a;
            this.m_selBlock = null;
            this.m_picBlocks = [];
            this.m_ctx = b
        },
        clearPicBlocks: function () {
            for (; 0 < this.m_picBlocks.length;)
                this.m_picBlocks.pop()
        },
        setLevel: function (a) {
            this.m_level = a
        },
        getLevel: function () {
            return this.m_level
        },
        initPicBlocks: function () {
            var c = null
                , e = c = 0
                , d = []
                , d = null
                , d = FZ.GameDefs.DEBUG ? FZ.GameDefs.debuggetLevelInfoByLevel(this.m_level) : FZ.GameDefs.getLevelInfoByLevel(this.m_level);
            this.clearPicBlocks();
            if (d) {
                this.m_row = d.row;
                this.m_col = d.col;
                this.block_w = d.block_w;
                this.block_h = d.block_h;
                this.m_picName = d.pic_name;
                for (var f = [], e = [], g = d = d.row * d.col, h = 0, c = [], m = [], k = 0; k < d; k++)
                    f.push(k),
                        e.push(k);
                for (k = 0; k < d / 2; k++)
                    h = Math.floor(FZ.Math.random(0, g)),
                        c.push(f[h]),
                        g-- ,
                        f.splice(h, 1),
                        h = Math.floor(FZ.Math.random(0, g)),
                        c.push(f[h]),
                        g-- ,
                        f.splice(h, 1),
                        m.push(c),
                        c = [];
                FZ.GameDefs.DEBUG && (a = []);
                for (k = 0; k < d / 2; k++) {
                    c = m.pop();
                    FZ.GameDefs.DEBUG && (f = {
                        first: b(c[0]),
                        second: b(c[1])
                    },
                        a.push(f));
                    f = c[0];
                    c = c[1];
                    g = [];
                    h = null;
                    for (h = 0; h < e.length; h++)
                        g.push(e[h]);
                    h = g[f];
                    g[f] = g[c];
                    g[c] = h;
                    e = g
                }
                d = e;
                for (m = 0; m < this.m_row; m++)
                    for (k = 0; k < this.m_col; k++)
                        c = m * this.m_col + k,
                            e = d[c],
                            c = new FZ.Pic(this.m_picName, m, k, this.block_w, this.block_h, c, e),
                            this.m_picBlocks.push(c)
            }
        },
        checkComplete: function () {
            for (var a = 0, b = 0; b < this.m_picBlocks.length && b === this.m_picBlocks[b].m_sort_cur_index; b++)
                a = b;
            return a === this.m_picBlocks.length - 1 ? !0 : !1
        },
        update: function () {
            var a = FZ.ControlManager.Mouse.x
                , b = FZ.ControlManager.Mouse.y;
            this.m_redraw = !1;
            if (a < FZ.GameDefs.BLOCK_OFFSET_X || a > FZ.GameDefs.BLOCK_OFFSET_X + 280 || b < FZ.GameDefs.BLOCK_OFFSET_Y || b > FZ.GameDefs.BLOCK_OFFSET_Y + 360)
                return this.m_redraw = !0,
                    this.m_selBlock = null,
                    !1;
            this.m_redraw = !0;
            var d = 0
                , d = Math.floor((b - FZ.GameDefs.BLOCK_OFFSET_Y) / this.block_h) * this.m_col + Math.floor((a - FZ.GameDefs.BLOCK_OFFSET_X) / this.block_w)
                , f = this.m_picBlocks[d];
            this.m_selBlock && this.updateSelectedBlockPos(this.m_ctx, a, b);
            return !this.m_selBlock && FZ.ControlManager.Mouse.mouseDown ? (this.m_selBlock = null,
                this.m_selBlock = new FZ.Pic(this.m_picName, f.m_row, f.m_col, this.block_w, this.block_h, f.m_sort_index, f.m_sort_cur_index),
                f.m_sprite.setOpacity(0),
                f.draw(this.m_ctx),
                this.m_selBlock.m_sprite.setOpacity(0.5),
                this.m_selBlock.m_sprite.makeTranslate(this.m_selBlock.m_x, this.m_selBlock.m_y),
                this.m_selBlock.m_sprite.draw(this.m_ctx),
                this.m_selBlock.m_drag_x = 0,
                this.m_selBlock.m_drag_y = 0,
                this.m_drag_start_Deltax = a - this.m_selBlock.m_x,
                this.m_drag_start_Deltay = b - this.m_selBlock.m_y,
                this.m_redraw = !0,
                !1) : FZ.ControlManager.Mouse.mouseUp && this.m_selBlock && this.m_selBlock.m_sort_index === d ? (this.m_redraw = !0,
                    this.m_selBlock = null,
                    !1) : FZ.ControlManager.Mouse.mouseUp && this.m_selBlock && this.m_selBlock.m_sort_index !== d ? (this.exchagePicBlocks(this.m_selBlock.m_sort_index, d),
                        this.m_selBlock.m_sprite.setOpacity(0),
                        this.m_selBlock = null,
                        this.m_redraw = !0,
                        this.checkComplete()) : !1
        },
        getSelBlock: function () {
            return this.m_selBlock
        },
        clearSelBlock: function () {
            this.m_selBlock = null
        },
        drawBlocks: function (a, b) {
            this.m_picBlocks[b].draw(a)
        },
        updateSelectedBlockPos: function (a, b, d) {
            a = 0;
            a = 4 > this.m_level ? 279 : 280;
            b -= this.m_drag_start_Deltax;
            d -= this.m_drag_start_Deltay;
            b < FZ.GameDefs.BLOCK_OFFSET_X || b + this.block_w > FZ.GameDefs.BLOCK_OFFSET_X + a || d < FZ.GameDefs.BLOCK_OFFSET_Y || d + this.block_h > FZ.GameDefs.BLOCK_OFFSET_Y + 360 || (this.m_redraw = !0,
                this.m_selBlock.m_sprite.makeTranslate(b, d))
        },
        exchagePicBlocks: function (a, b) {
            var d = this.m_picBlocks[a].m_sort_cur_index
                , f = this.m_picBlocks[b].m_sort_cur_index;
            this.m_picBlocks[a].setFrame(f);
            this.m_picBlocks[a].setSortAfterId(f);
            this.m_picBlocks[b].setFrame(d);
            this.m_picBlocks[b].setSortAfterId(d)
        }
    })
}
)();
(function () {
    FZ.Game = {};
    FZ.ArrayIndexof = function (a, b) {
        for (var c = 0, c = 0; c < a.length; c++)
            if (b === a[c])
                return c;
        return -1
    }
        ;
    window.addEventListener("load", function () {
        FZ.GameBase.init("JewelTreasureMatch", FZ.$("MainGame"), FZ.$("RotateMsg"), !1, FZ.StateDefs.GAME_STATE_PRELOADING, "1.1");
        FZ.Music.set(FZ.GameDefs.SND_FILES);
        FZ.GameBase.loadGame();
        void 0 === FZ.GameBase.SaveObject.level && (FZ.GameBase.SaveObject.level = 1,
            FZ.GameBase.saveGame())
    }, !1)
}
)();
(function () {
    FZ.Tools.extend(FZ.GameStateBase.prototype, {
        updateDisplayList: function (a, b) {
            for (var c = 0, c = 0; c < a.length; c++)
                a[c].update(b)
        },
        addBtnEvent: function (a, b) {
            for (var c = 0, c = 0; c < a.length; c++)
                a[c].callback = b
        },
        addBtnObserver: function (a, b) {
            for (var c = 0, c = 0; c < a.length; c++)
                a[c].setObserver(b)
        },
        removeBtnEvent: function (a) {
            for (var b = 0, b = 0; b < a.length; b++)
                a[b].callback = null
        },
        drawDisplayList: function (a, b) {
            for (var c = 0, e = null, c = 0; c < a.length; c++)
                e = a[c],
                    e.draw(b)
        }
    })
}
)();
(function () {
    var a = function (a) {
        a ? a.splice(0, a.length) : a = [];
        return a
    };
    FZ.DisplayFactory = new (FZ.newClass({
        createDisplay: function (b, c, e) {
            var d = null;
            if (FZ.GameDefs.DISPLAY_UI === e) {
                e = 0;
                d = null;
                b = a(b);
                for (e = 0; e < c.length; e++)
                    d = FZ.spriteManager.getSprite(c[e]),
                        b.push(d);
                d = b
            } else if (FZ.GameDefs.DISPLAY_BTN === e) {
                e = 0;
                var f = d = d = null;
                b = a(b);
                for (e = 0; e < c.length; e++)
                    d = FZ.spriteManager.getSprite(c[e][0]),
                        f = FZ.spriteManager.getSprite(c[e][1]),
                        d = new FZ.Button(d, f),
                        b.push(d);
                d = b
            } else if (FZ.GameDefs.DISPLAY_SWITCH === e) {
                e = 0;
                d = f = d = null;
                b = a(b);
                for (e = 0; e < c.length; e++)
                    d = FZ.spriteManager.getSprite(c[e][0]),
                        f = FZ.spriteManager.getSprite(c[e][1]),
                        d = new FZ.Switch(d, f),
                        b.push(d);
                d = b
            }
            return d
        }
    }))
}
)();
(function () {
    FZ.Game.PreLoadingState = new (FZ.newClass({
        StateName: FZ.StateDefs.GAME_STATE_PRELOADING,
        preProcess: function () {
            var a = 0
                , b = null;
            FZ.ResourceManager.setCallback(FZ.Tools.bind(this, this.loadingCallback));
            for (a = 0; a < FZ.ImageTags[FZ.GameDefs.TAG_LOAD].length; a++)
                b = FZ.ImageTags[FZ.GameDefs.TAG_LOAD][a],
                    FZ.spriteManager.addResource(b.name, b.zOrder, "./jigsaw_files/res/images/" + b.fileURL, b.x, b.y, b.cols)
        },
        postProcess: function () { },
        loadingCallback: function () {
            FZ.ResourceManager.isResourceLoaded() && FZ.GameBase.switchToState(FZ.StateDefs.GAME_STATE_LOADING, new FZ.StateTransition.Transparent(FZ.GameDefs.SWITCH_STATE_TIME))
        }
    }, FZ.GameStateBase))
}
)();
(function () {
    FZ.Game.LoadingState = new (FZ.newClass({
        StateName: FZ.StateDefs.GAME_STATE_LOADING,
        GENERAL_BG_INDEX: 0,
        LOAD_BG_INDEX: 1,
        LOAD_BAR_BG_INDEX: 2,
        LOAD_BAR_INDEX: 3,
        UI_DEFS: ["GENERAL_BG", "LOADING_BG", "loading_empty", "loading_full"],
        Sprite_BG: null,
        General_BG: null,
        m_loadingbar_bg: null,
        m_loadingbar: null,
        stateInit: function () {
            var a = 0
                , b = null;
            this.StateCanvas.width = FZ.GameBase.Width * FZ.GameBase.PixelScale;
            this.StateCanvas.height = FZ.GameBase.Height * FZ.GameBase.PixelScale;
            this.Sprite_BG = FZ.spriteManager.getSprite(this.UI_DEFS[this.LOAD_BG_INDEX]);
            this.General_BG = FZ.spriteManager.getSprite(this.UI_DEFS[this.GENERAL_BG_INDEX]);
            this.m_loadingbar_bg = FZ.spriteManager.getSprite(this.UI_DEFS[this.LOAD_BAR_BG_INDEX]);
            this.m_loadingbar = FZ.spriteManager.getSprite(this.UI_DEFS[this.LOAD_BAR_INDEX]);
            FZ.ResourceManager.setCallback(FZ.Tools.bind(this, this.loadingCallback));
            if (FZ.GameDefs.DEBUG)
                for (a = 0; a < FZ.DebugImageConfig.length; a++)
                    b = FZ.DebugImageConfig[a],
                        FZ.spriteManager.addResource(b.name, b.zOrder, "./jigsaw_files/res/images/" + b.fileURL, b.x, b.y, b.cols, b.rows);
            else
                for (a = 0; a < FZ.ImageConfig.length; a++)
                    b = FZ.ImageConfig[a],
                        FZ.spriteManager.addResource(b.name, b.zOrder, "./jigsaw_files/res/images/" + b.fileURL, b.x, b.y, b.cols, b.rows)
        },
        postProcess: function () { },
        visualUpdate: function () {
            this.General_BG.draw(this.StateContext);
            this.Sprite_BG.draw(this.StateContext);
            this.m_loadingbar_bg.draw(this.StateContext);
            var a = this.m_loadingbar.getSize();
            this.m_loadingbar.drawClip(this.StateContext, 0, 0, a[0] * FZ.ResourceManager.getLoadingRatio(), a[1])
        },
        loadingCallback: function () {
            FZ.ResourceManager.isResourceLoaded() && FZ.GameBase.switchToState(FZ.StateDefs.GAME_STATE_MAINMEN, new FZ.StateTransition.Transparent(FZ.GameDefs.SWITCH_STATE_TIME))
        }
    }, FZ.GameStateBase))
}
)();
(function () {
    FZ.Game.MainMenuState = new (FZ.newClass({
        StateName: FZ.StateDefs.GAME_STATE_MAINMEN,
        MAIN_BG_INDEX: 0,
        UI_DEFS: ["GENERAL_BG", "LOADING_BG"],
        BTN_START_INDEX: 0,
        BTN_HOWTOPLAY_INDEX: 1,
        BTN_OPTION_INDEX: 2,
        BTN_DEFS: [["BTN_GAME_START", "BTN_GAME_START_TOUCH"]],
        SWTICH_DEFS: [["BTN_SOUND", "BTN_SOUND_OFF"]],
        MUSIC_INDEX: 0,
        m_btn_callback: null,
        m_switches: null,
        m_uis: null,
        m_btns: null,
        TEXT_SCORE_INDEX: 0,
        TEXT_POS: [240, 403, 70, 22],
        m_txt_score: null,
        m_first_enter: !0,
        m_switch_callback: null,
        __createTexts: function () {
            var a = 0
                , a = 4 * this.TEXT_SCORE_INDEX;
            this.m_txt_score = FZ.CreateTextSprite(this.TEXT_POS[a + 0], this.TEXT_POS[a + 1], this.TEXT_POS[a + 2], this.TEXT_POS[a + 3], FZ.GameDefs.FONT_COLOR_BLUE);
            this.StateSprite.addChild(this.m_txt_score)
        },
        __updateScore: function () {
            var a = null
                , a = "" + FZ.GameBase.SaveObject.bestScore;
            this.m_txt_score.setText(a)
        },
        __setSwitchState: function (a, b) {
            b ? a.setState(FZ.GameDefs.SWITCH_ON) : a.setState(FZ.GameDefs.SWITCH_OFF)
        },
        addSwitchEvent: function () {
            for (var a = 0, a = 0; a < this.m_switches.length; a++)
                this.m_switches[a].callback = this.m_switch_callback
        },
        removeSwitchEvent: function () {
            for (var a = 0, a = 0; a < this.m_switches.length; a++)
                this.m_switches[a].callback = null
        },
        stateInit: function () {
            this.m_first_enter = !0;
            this.m_btn_callback = FZ.Tools.bindWithEvent(this, this.buttonClick);
            this.m_switch_callback = FZ.Tools.bindWithEvent(this, this.switchClick);
            this.StateCanvas.width = FZ.GameBase.Width * FZ.GameBase.PixelScale;
            this.StateCanvas.height = FZ.GameBase.Height * FZ.GameBase.PixelScale;
            this.m_uis = FZ.DisplayFactory.createDisplay(this.m_uis, this.UI_DEFS, FZ.GameDefs.DISPLAY_UI);
            this.m_btns = FZ.DisplayFactory.createDisplay(this.m_btns, this.BTN_DEFS, FZ.GameDefs.DISPLAY_BTN);
            this.addBtnEvent(this.m_btns, this.m_btn_callback);
            "Android" !== FZ.Browser && (this.m_switches = FZ.DisplayFactory.createDisplay(this.m_switches, this.SWTICH_DEFS, FZ.GameDefs.DISPLAY_SWITCH),
                this.addSwitchEvent())
        },
        visualUpdate: function () {
            this.drawDisplayList(this.m_uis, this.StateContext);
            this.drawDisplayList(this.m_btns, this.StateContext);
            "Android" !== FZ.Browser && this.drawDisplayList(this.m_switches, this.StateContext)
        },
        preProcess: function () {
            "Android" !== FZ.Browser && this.__setSwitchState(this.m_switches[this.MUSIC_INDEX], FZ.Music.IsPlaying);
            this.m_first_enter = !1
        },
        AIUpdate: function (a) {
            this.updateDisplayList(this.m_btns, a);
            "Android" !== FZ.Browser && this.updateDisplayList(this.m_switches, a)
        },
        postProcess: function () { },
        buttonClick: function (a) {
            a === this.m_btns[this.BTN_START_INDEX] && (FZ.Game.GameState.m_next_state = FZ.StateDefs.GAME_STATE_UNKNOW,
                FZ.GameBase.switchToState(FZ.StateDefs.GAME_STATE_GAME_HINT, new FZ.StateTransition.Transparent(FZ.GameDefs.SWITCH_STATE_TIME)))
        },
        switchClick: function (a) {
            var b = null;
            "Android" !== FZ.Browser && a === this.m_switches[this.MUSIC_INDEX] && (b = a.getState(),
                FZ.GameDefs.SWITCH_ON === b ? FZ.Music.play() : FZ.Music.pause())
        },
        setCheatCode: function () {
            var a = null;
            FZ.GameDefs.CHEAT_MODE_NONE !== FZ.cheatCode ? (FZ.cheatCode = FZ.GameDefs.CHEAT_MODE_NONE,
                alert(FZ.GameDefs.CHEAT_MSG_DISABLE)) : (a = prompt(FZ.GameDefs.CHEAT_MSG_PROMPT),
                    FZ.CheatCode.isCheatCode(a, FZ.CheatCode.CHEAT_CODE_STR[0]) ? (FZ.cheatCode = FZ.GameDefs.CHEAT_MODE_BOMB,
                        alert(FZ.GameDefs.CHEAT_MSG_BOMB)) : FZ.CheatCode.isCheatCode(a, FZ.CheatCode.CHEAT_CODE_STR[1]) && (FZ.cheatCode = FZ.GameDefs.CHEAT_MODE_INVINCIBLE,
                            alert(FZ.GameDefs.CHEAT_MSG_INVINCIBLE)))
        }
    }, FZ.GameStateBase))
}
)();
(function () {
    FZ.Game.HintState = new (FZ.newClass({
        StateName: FZ.StateDefs.GAME_STATE_GAME_HINT,
        MAIN_BG_INDEX: 0,
        UI_DEFS: ["GENERAL_BG", "hint_frame"],
        BTN_PLAY_INDEX: 0,
        BTN_DEFS: [["BTN_PLAY", "BTN_PLAY_TOUCH"]],
        m_btn_callback: null,
        m_level: 0,
        m_uis: null,
        m_btns: null,
        m_hintPic: null,
        m_hinted: !1,
        m_first_enter: !0,
        stateInit: function () {
            this.m_first_enter = !0;
            this.m_btn_callback = FZ.Tools.bindWithEvent(this, this.buttonClick);
            this.StateCanvas.width = FZ.GameBase.Width * FZ.GameBase.PixelScale;
            this.StateCanvas.height = FZ.GameBase.Height * FZ.GameBase.PixelScale;
            this.m_uis = FZ.DisplayFactory.createDisplay(this.m_uis, this.UI_DEFS, FZ.GameDefs.DISPLAY_UI);
            this.m_btns = FZ.DisplayFactory.createDisplay(this.m_btns, this.BTN_DEFS, FZ.GameDefs.DISPLAY_BTN);
            this.addBtnEvent(this.m_btns, this.m_btn_callback)
        },
        visualUpdate: function () {
            this.m_uis[0].draw(this.StateContext);
            this.m_hintPic.draw(this.StateContext);
            this.m_uis[1].draw(this.StateContext);
            this.drawDisplayList(this.m_btns, this.StateContext)
        },
        createHintPic: function (a) {
            this.m_hintPic = FZ.spriteManager.getSprite("hint_" + a);
            this.m_hintPic.makeScale2(FZ.GameDefs.SCALE_RATE_W, FZ.GameDefs.SCALE_RATE_H);
            this.m_hintPic.makeTranslate(FZ.GameDefs.HINT_X, FZ.GameDefs.HINT_Y)
        },
        preProcess: function () {
            this.m_level = FZ.GameBase.SaveObject.level;
            this.m_hintPic = null;
            this.createHintPic(this.m_level);
            this.m_hintPic.setOpacity(1)
        },
        AIUpdate: function (a) {
            this.updateDisplayList(this.m_btns, a)
        },
        postProcess: function () {
            this.m_hintPic.setOpacity(0)
        },
        buttonClick: function (a) {
            a === this.m_btns[this.BTN_PLAY_INDEX] && FZ.GameBase.switchToState(FZ.StateDefs.GAME_STATE_GAME_IN, new FZ.StateTransition.Transparent(FZ.GameDefs.SWITCH_STATE_TIME))
        },
        setCheatCode: function () {
            var a = null;
            FZ.GameDefs.CHEAT_MODE_NONE !== FZ.cheatCode ? (FZ.cheatCode = FZ.GameDefs.CHEAT_MODE_NONE,
                alert(FZ.GameDefs.CHEAT_MSG_DISABLE)) : (a = prompt(FZ.GameDefs.CHEAT_MSG_PROMPT),
                    FZ.CheatCode.isCheatCode(a, FZ.CheatCode.CHEAT_CODE_STR[0]) ? (FZ.cheatCode = FZ.GameDefs.CHEAT_MODE_BOMB,
                        alert(FZ.GameDefs.CHEAT_MSG_BOMB)) : FZ.CheatCode.isCheatCode(a, FZ.CheatCode.CHEAT_CODE_STR[1]) && (FZ.cheatCode = FZ.GameDefs.CHEAT_MODE_INVINCIBLE,
                            alert(FZ.GameDefs.CHEAT_MSG_INVINCIBLE)))
        }
    }, FZ.GameStateBase))
}
)();
(function () {
    FZ.Game.GameState = new (FZ.newClass({
        StateName: FZ.StateDefs.GAME_STATE_GAME_IN,
        m_state: 0,
        m_timer: 0,
        STATE_NORMAL: 0,
        STATE_LEVEL_UP: 1,
        STATE_ENDING: 2,
        GAME_BG_INDEX: 0,
        GAME_BOX_INDEX: 1,
        UI_DEFS: ["GENERAL_BG", "game_in_BG"],
        BTN_HINT_INDEX: 0,
        BTN_MENU_INDEX: 1,
        BTN_DEFS: [["BTN_HINT", "BTN_HINT_TOUCH"], ["BTN_MENU", "BTN_MENU_TOUCH"]],
        SWTICH_DEFS: [["BTN_SOUND", "BTN_SOUND_OFF"]],
        MUSIC_INDEX: 0,
        picSprite: null,
        m_cur_level: 0,
        m_bg: null,
        m_game_box: null,
        m_btn_callback: null,
        m_switch_callback: null,
        m_switches: null,
        m_gameCanvas: null,
        m_gameContext: null,
        m_btns: null,
        m_picMgr: null,
        m_updateDraw: !1,
        m_updateDrawTime: 0,
        createGameCanvas: function () {
            this.m_gameCanvas = document.createElement("canvas");
            this.m_gameCanvas.width = FZ.GameBase.Width * FZ.GameBase.PixelScale;
            this.m_gameCanvas.height = FZ.GameBase.Height * FZ.GameBase.PixelScale;
            this.m_gameCanvas.style.zIndex = 2;
            this.m_gameCanvas.style.position = "absolute";
            this.m_gameCanvas.style.left = "0px";
            this.m_gameCanvas.style.top = "0px";
            this.m_gameContext = this.m_gameCanvas.getContext("2d");
            this.m_gameContext.globalCompositeOperation = "copy";
            this.StateSprite.__Div.appendChild(this.m_gameCanvas)
        },
        _createBlocks: function () {
            this.m_picMgr = null;
            this.m_cur_level = FZ.GameBase.SaveObject.level;
            this.m_picMgr = new FZ.picManager(this.m_cur_level, this.StateContext);
            this.m_picMgr.initPicBlocks()
        },
        __setSwitchState: function (a, b) {
            b ? a.setState(FZ.GameDefs.SWITCH_ON) : a.setState(FZ.GameDefs.SWITCH_OFF)
        },
        addSwitchEvent: function () {
            for (var a = 0, a = 0; a < this.m_switches.length; a++)
                this.m_switches[a].callback = this.m_switch_callback
        },
        removeSwitchEvent: function () {
            for (var a = 0, a = 0; a < this.m_switches.length; a++)
                this.m_switches[a].callback = null
        },
        stateInit: function () {
            this.m_btn_callback = FZ.Tools.bindWithEvent(this, this.buttonClick);
            this.m_switch_callback = FZ.Tools.bindWithEvent(this, this.switchClick);
            this.StateCanvas.width = FZ.GameBase.Width * FZ.GameBase.PixelScale;
            this.StateCanvas.height = FZ.GameBase.Height * FZ.GameBase.PixelScale;
            this.createGameCanvas();
            this.m_bg = FZ.spriteManager.getSprite(this.UI_DEFS[this.GAME_BG_INDEX]);
            this.m_game_box = FZ.spriteManager.getSprite(this.UI_DEFS[this.GAME_BOX_INDEX]);
            this.m_btns = FZ.DisplayFactory.createDisplay(this.m_btns, this.BTN_DEFS, FZ.GameDefs.DISPLAY_BTN);
            this.addBtnEvent(this.m_btns, this.m_btn_callback);
            this.m_state = this.STATE_NORMAL;
            "Android" !== FZ.Browser && (this.m_switches = FZ.DisplayFactory.createDisplay(this.m_switches, this.SWTICH_DEFS, FZ.GameDefs.DISPLAY_SWITCH),
                this.addSwitchEvent())
        },
        drawPics: function () {
            this.m_game_box.draw(this.StateContext);
            for (var a = 0; a < this.m_picMgr.m_picBlocks.length; a++) {
                var b = this.m_picMgr.getSelBlock();
                b && b.m_sort_index === a ? this.m_picMgr.m_picBlocks[a].m_sprite.setOpacity(0) : this.m_picMgr.m_picBlocks[a].m_sprite.setOpacity(1);
                this.m_picMgr.drawBlocks(this.StateContext, a);
                this.m_picMgr.m_picBlocks[a].m_sprite.setOpacity(1)
            }
        },
        preProcess: function () {
            this.m_updateDraw = !1;
            this.m_updateDrawTime = 0;
            FZ.Game.HintState.m_hinted || this._createBlocks();
            this.m_bg.draw(this.StateContext);
            this.drawPics();
            "Android" !== FZ.Browser && (this.__setSwitchState(this.m_switches[this.MUSIC_INDEX], FZ.Music.IsPlaying),
                this.drawDisplayList(this.m_switches, this.StateContext));
            this.m_btns[this.BTN_HINT_INDEX].draw(this.StateContext);
            this.m_btns[this.BTN_MENU_INDEX].draw(this.StateContext)
        },
        postProcess: function () { },
        AIUpdate: function (a) {
            this.updateDisplayList(this.m_btns, a);
            var b = !1;
            if (b = this.m_picMgr.update())
                FZ.Game.HintState.m_hinted = !1,
                    this.m_cur_level++ ,
                    FZ.GameBase.SaveObject.level = this.m_cur_level,
                    FZ.GameBase.saveGame(),
                    FZ.GameBase.SaveObject.level <= FZ.GameDefs.TOTAL_LEVEL ? FZ.GameBase.switchToState(FZ.StateDefs.GAME_STATE_NEXT_LEVEL, new FZ.StateTransition.Transparent(FZ.GameDefs.SWITCH_STATE_TIME)) : FZ.GameBase.switchToState(FZ.StateDefs.GAME_STATE_COMPLETE, new FZ.StateTransition.Transparent(FZ.GameDefs.SWITCH_STATE_TIME));
            "Android" !== FZ.Browser && this.updateDisplayList(this.m_switches, a)
        },
        visualUpdate: function () {
            var a = this.m_picMgr.getSelBlock();
            this.m_picMgr.m_redraw && (this.m_picMgr.m_redraw = !1,
                this.m_bg.draw(this.StateContext),
                this.drawPics(),
                a && (a.m_sprite.setOpacity(0.5),
                    a.m_sprite.draw(this.StateContext)),
                this.m_btns[this.BTN_HINT_INDEX].draw(this.StateContext),
                this.m_btns[this.BTN_MENU_INDEX].draw(this.StateContext),
                "Android" !== FZ.Browser && this.drawDisplayList(this.m_switches, this.StateContext))
        },
        switchClick: function (a) {
            var b = null;
            "Android" !== FZ.Browser && a === this.m_switches[this.MUSIC_INDEX] && (b = a.getState(),
                FZ.GameDefs.SWITCH_ON === b ? FZ.Music.play() : FZ.Music.pause())
        },
        buttonClick: function (a) {
            a === this.m_btns[this.BTN_HINT_INDEX] && (this.m_picMgr.clearSelBlock(),
                FZ.Game.HintState.m_hinted = !0,
                FZ.GameBase.switchToState(FZ.StateDefs.GAME_STATE_GAME_HINT));
            a === this.m_btns[this.BTN_MENU_INDEX] && (FZ.Game.HintState.m_hinted = !1,
                this.m_picMgr.clearSelBlock(),
                FZ.GameBase.switchToState(FZ.StateDefs.GAME_STATE_MAINMEN, new FZ.StateTransition.Transparent(FZ.GameDefs.SWITCH_STATE_TIME)))
        }
    }, FZ.GameStateBase))
}
)();
(function () {
    FZ.Game.NextLevelState = new (FZ.newClass({
        StateName: FZ.StateDefs.GAME_STATE_NEXT_LEVEL,
        MAIN_BG_INDEX: 0,
        UI_DEFS: ["GENERAL_BG", "hint_frame"],
        BTN_NEXT_LEVEL_INDEX: 0,
        BTN_DEFS: [["BTN_NEXT_LEVEL", "BTN_NEXT_LEVEL_TOUCH"]],
        m_btn_callback: null,
        m_level: 0,
        m_uis: null,
        m_btns: null,
        m_hintPic: null,
        m_first_enter: !0,
        stateInit: function () {
            this.m_first_enter = !0;
            this.m_btn_callback = FZ.Tools.bindWithEvent(this, this.buttonClick);
            this.StateCanvas.width = FZ.GameBase.Width * FZ.GameBase.PixelScale;
            this.StateCanvas.height = FZ.GameBase.Height * FZ.GameBase.PixelScale;
            this.m_uis = FZ.DisplayFactory.createDisplay(this.m_uis, this.UI_DEFS, FZ.GameDefs.DISPLAY_UI);
            this.m_btns = FZ.DisplayFactory.createDisplay(this.m_btns, this.BTN_DEFS, FZ.GameDefs.DISPLAY_BTN);
            this.addBtnEvent(this.m_btns, this.m_btn_callback)
        },
        visualUpdate: function () {
            this.m_uis[0].draw(this.StateContext);
            this.m_hintPic.draw(this.StateContext);
            this.m_uis[1].draw(this.StateContext);
            this.drawDisplayList(this.m_btns, this.StateContext)
        },
        createHintPic: function (a) {
            this.m_hintPic = FZ.spriteManager.getSprite("hint_" + a)
        },
        preProcess: function () {
            this.m_level = FZ.GameBase.SaveObject.level - 1;
            this.m_hintPic = null;
            this.createHintPic(this.m_level);
            this.m_hintPic.setOpacity(1)
        },
        AIUpdate: function (a) {
            this.updateDisplayList(this.m_btns, a)
        },
        postProcess: function () {
            this.m_hintPic.setOpacity(0)
        },
        buttonClick: function (a) {
            console.log("");
            try {
                var directions = plus.webview.create("../directions.html", "directions");
                directions.evalJS('plus.key.addEventListener("backbutton", function () {plus.webview.currentWebview().close();});');
                directions.show();
            } catch (error) {
                window.location.href = "../directions.html";
            }
            return;
            a === this.m_btns[this.BTN_NEXT_LEVEL_INDEX] && (FZ.Game.GameState.m_next_state = FZ.StateDefs.GAME_STATE_UNKNOW,
                FZ.GameBase.switchToState(FZ.StateDefs.GAME_STATE_GAME_HINT, new FZ.StateTransition.Transparent(FZ.GameDefs.SWITCH_STATE_TIME)))
        },
        setCheatCode: function () {
            var a = null;
            FZ.GameDefs.CHEAT_MODE_NONE !== FZ.cheatCode ? (FZ.cheatCode = FZ.GameDefs.CHEAT_MODE_NONE,
                alert(FZ.GameDefs.CHEAT_MSG_DISABLE)) : (a = prompt(FZ.GameDefs.CHEAT_MSG_PROMPT),
                    FZ.CheatCode.isCheatCode(a, FZ.CheatCode.CHEAT_CODE_STR[0]) ? (FZ.cheatCode = FZ.GameDefs.CHEAT_MODE_BOMB,
                        alert(FZ.GameDefs.CHEAT_MSG_BOMB)) : FZ.CheatCode.isCheatCode(a, FZ.CheatCode.CHEAT_CODE_STR[1]) && (FZ.cheatCode = FZ.GameDefs.CHEAT_MODE_INVINCIBLE,
                            alert(FZ.GameDefs.CHEAT_MSG_INVINCIBLE)))
        }
    }, FZ.GameStateBase))
}
)();
(function () {
    FZ.Game.GameCompleteState = new (FZ.newClass({
        StateName: FZ.StateDefs.GAME_STATE_COMPLETE,
        MAIN_BG_INDEX: 0,
        UI_DEFS: ["GENERAL_BG", "hint_frame", "ui_game_clear"],
        BTN_MAIN_MENU_INDEX: 0,
        BTN_DEFS: [["BTN_MAIN_MENU", "BTN_MAIN_MENU_TOUCH"]],
        m_btn_callback: null,
        m_level: 0,
        m_uis: null,
        m_btns: null,
        m_hintPic: null,
        m_first_enter: !0,
        stateInit: function () {
            this.m_first_enter = !0;
            this.m_btn_callback = FZ.Tools.bindWithEvent(this, this.buttonClick);
            this.StateCanvas.width = FZ.GameBase.Width * FZ.GameBase.PixelScale;
            this.StateCanvas.height = FZ.GameBase.Height * FZ.GameBase.PixelScale;
            this.m_uis = FZ.DisplayFactory.createDisplay(this.m_uis, this.UI_DEFS, FZ.GameDefs.DISPLAY_UI);
            this.m_btns = FZ.DisplayFactory.createDisplay(this.m_btns, this.BTN_DEFS, FZ.GameDefs.DISPLAY_BTN);
            this.addBtnEvent(this.m_btns, this.m_btn_callback)
        },
        visualUpdate: function () {
            this.m_uis[0].draw(this.StateContext);
            this.m_hintPic.draw(this.StateContext);
            this.m_uis[1].draw(this.StateContext);
            this.m_uis[2].draw(this.StateContext);
            this.drawDisplayList(this.m_btns, this.StateContext)
        },
        createHintPic: function (a) {
            this.m_hintPic = FZ.spriteManager.getSprite("hint_" + a)
        },
        preProcess: function () {
            this.m_level = FZ.GameBase.SaveObject.level - 1;
            this.m_level === FZ.GameDefs.TOTAL_LEVEL && (FZ.GameBase.SaveObject.level = 1,
                FZ.GameBase.saveGame());
            this.m_hintPic = null;
            this.createHintPic(this.m_level);
            this.m_hintPic.setOpacity(1)
        },
        AIUpdate: function (a) {
            this.updateDisplayList(this.m_btns, a)
        },
        postProcess: function () {
            this.m_hintPic.setOpacity(0)
        },
        buttonClick: function (a) {
            a === this.m_btns[this.BTN_MAIN_MENU_INDEX] && (FZ.Game.GameState.m_next_state = FZ.StateDefs.GAME_STATE_UNKNOW,
                FZ.GameBase.switchToState(FZ.StateDefs.GAME_STATE_MAINMEN, new FZ.StateTransition.Transparent(FZ.GameDefs.SWITCH_STATE_TIME)))
        },
        setCheatCode: function () {
            var a = null;
            FZ.GameDefs.CHEAT_MODE_NONE !== FZ.cheatCode ? (FZ.cheatCode = FZ.GameDefs.CHEAT_MODE_NONE,
                alert(FZ.GameDefs.CHEAT_MSG_DISABLE)) : (a = prompt(FZ.GameDefs.CHEAT_MSG_PROMPT),
                    FZ.CheatCode.isCheatCode(a, FZ.CheatCode.CHEAT_CODE_STR[0]) ? (FZ.cheatCode = FZ.GameDefs.CHEAT_MODE_BOMB,
                        alert(FZ.GameDefs.CHEAT_MSG_BOMB)) : FZ.CheatCode.isCheatCode(a, FZ.CheatCode.CHEAT_CODE_STR[1]) && (FZ.cheatCode = FZ.GameDefs.CHEAT_MODE_INVINCIBLE,
                            alert(FZ.GameDefs.CHEAT_MSG_INVINCIBLE)))
        }
    }, FZ.GameStateBase))
}
)();
